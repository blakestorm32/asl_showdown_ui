{"version":3,"file":"battle-team-editor.js","names":["TeamEditorState","_PSModel","team","_this","call","sets","lastPackedTeam","gen","Dex","dex","deletedSet","search","DexSearch","format","searchIndex","originalSpecies","narrow","selectionTypeOrder","innerFocus","isLetsGo","isNatDex","isBDSP","formeLegality","abilityLegality","defaultLevel","readonly","fetching","userSetsCache","ignoreRows","_sampleSetPromises","updateTeam","setFormat","window","_inheritsLoose","_proto","prototype","packedTeam","Teams","unpack","formatid","toID","forFormat","slice","includes","setSearchType","type","i","value","_this$search","_this$search$results","set","setType","prependResults","getSearchMoves","some","row","split","species","get","exists","items","abilities","push","find","results","updateSearchMoves","_this$search$prependR","oldResultsLength","length","query","setSearchValue","out","Math","max","moves","_this$search$results2","selectSearchValue","_this$search$results3","_result","result","_this$search$results4","addFilter","getResultValue","changeSpecies","speciesName","_this$getDefaultItem","item","getDefaultItem","undefined","name","ability","getDefaultAbility","level","gender","evs","hp","atk","def","spa","spd","spe","ivs","nature","deleteSet","index","splice","undeleteSet","copySet","_TeamEditorState$clip","_TeamEditorState$clip2","_this$team$key","clipboard","teams","otherSets","key","entire","Object","keys","pasteSet","isMove","clipboardTeam","sources","map","Number","sort","a","b","_i2","source","pack","_i4","_Object$values2","values","apply","_i6","newSet","JSON","parse","stringify","downSearchValue","_this$search$results$","_this$search$results$2","upSearchValue","_this$search$results$3","_this$search$results$4","_this$search$results$5","startsWith","_result$1$slice$split","slot","moveid","canAdd","isBox","getHPType","hpType","hpMove","getHPMove","hpTypes","atkDV","floor","defDV","defaultIVs","hpTypeX","statOrder","_i8","s","hpTypeMatters","_i10","_set$moves2","move","_i12","_set$moves4","charAt","toUpperCase","getIVs","assign","noGuess","arguments","useIVs","_i14","_Dex$statNames2","statNames","stat","hpModulo","_this$prefersMinStats","prefersMinStats","minAtk","minSpe","hpDVs","types","HPdvs","hpIVs","HPivs","canHyperTrain","_hpIVs$spe","_hpIVs$atk","defaultHappiness","_set$evs","_set$evs2","_i16","_set$moves6","moveName","id","hasMoveBesidesTransform","category","damage","ohko","getNickname","baseSpecies","getHPIVs","getStat","ivOverride","evOverride","natureOverride","_ref","_set$evs3","_BattleNatures","_BattleNatures2","supportsEVs","supportsAVs","baseStat","baseStats","iv","ev","trunc","val","BattleNatures","plus","minus","friendshipValue","export","compat","import","save","getTypeWeakness","attackType","_this$dex$types$get$d","weaknessType","damageTaken","IMMUNE","RESIST","WEAK","getWeakness","abilityid","_i18","factor","_i20","pokemonDefensiveCoverage","coverage","_i22","_this$dex$types$names2","names","teamDefensiveCoverage","counters","_i24","_this$dex$types$names4","resists","neutrals","weaknesses","_i26","_this$sets2","_i28","_Object$entries2","entries","_ref2","battleOnly","requiredItems","filter","endsWith","isMega","isPrimal","iconCache","fetchSampleSets","_this2","sampleSets","Net","Config","routes","client","then","json","data","update","getSampleSets","_d$stats","_d$stats2","d","speciesid","all","stats","getUserSets","userSets","_i30","_ref4","_window$PS","PS","list","setList","duplicateNameIndices","_i32","_boxSet$species","_userSets$_boxSet$spe","boxSet","cachedSets","PSModel","TeamEditor","_preact$Component","_this3","_len","args","Array","_key2","concat","wizard","editor","setTab","target","currentTarget","forceUpdate","cancelClipboard","probablyMobile","document","body","offsetWidth","_proto2","renderDefensiveCoverage","PSUtils","sortBy","counter","good","medium","bad","renderTypeDefensive","preact","h","_i34","colSpan","renderClipboard","_Object$values3","_TeamEditorState$clip3","renderSet","PSIcon","pokemon","join","onClick","render","_this4","_this$props$narrow","props","subscribe","readOnly","TeamWizard","onChange","onUpdate","TeamTextbox","Fragment","children","resources","Component","_preact$Component2","_this5","_len2","_key3","setInfo","textbox","heightTester","setDirty","windowing","selection","input","updateText","keyUp","contextMenu","shiftKey","_this5$innerFocus","_this5$innerFocus2","hadInnerFocus","range","openInnerFocus","preventDefault","stopImmediatePropagation","keyDown","keyCode","atStart","selectionStart","selectionEnd","removeFilter","getInnerFocusValue","resetScroll","closeMenu","resultsUp","base","querySelector","scrollTop","innerHeight","resultsDown","altKey","metaKey","maybeReplaceLine","addPokemon","_result$split","moveSlot","selectResult","replaceNoFocus","_window$PS2","alert","_exec","current","lineStart","lastIndexOf","pokepaste","exec","paste","pasteTxt","replace","valueIndex","indexOf","notes","title","clearInnerFocus","focus","noTextChange","autoSelect","lineEnd","line","rangeEndChar","_this5$innerFocus$ran","start","end","updateSearch","style","width","setIndex","nextSetIndex","nlIndex","trim","bottomY","getYAt","atIndex","parenIndex","selectionEndCutoff","lcLine","toLowerCase","lineRange","typeIndex","engageFocus","height","changeSet","changeCompat","checkbox","checked","clickDetails","_this5$innerFocus3","parseInt","offsetY","setSelectionRange","scrollResults","documentElement","clientWidth","scrollWidth","scrollIntoViewIfNeeded","handleSetChange","replaceSet","copyAll","select","execCommand","button","innerHTML","className","_proto3","fullLine","newValue","scrollHeight","_this$selection","oldRange","getSelectionTypeRange","_this$selection2","_this$selection3","_selection$lineRange","_this$editor$sets","_focus$setIndex","getSetRange","_this$innerFocus","newText","exportSet","_this$getSetRange","text","_this$props$onChange","_this$props","componentDidMount","_this6","getElementsByClassName","exportedTeam","setTimeout","componentWillUnmount","searchResults","windowResults","ceil","renderDetails","GenderChart","shiny","teraType","requiredTeraType","renderStats","StatForm","renderStatGraph","_this$setInfo$bottomY","_this$setInfo","_this7","_this$innerFocus2","_this$setInfo$this$in","_this$setInfo$this$in2","statsDetailsOffset","onInput","onContextMenu","onKeyUp","onKeyDown","placeholder","tabIndex","info","prevOffset","num","getPokemonIconNum","getTeambuilderSprite","onScroll","DetailsForm","PSSearchResults","resultIndex","onSelect","EMPTY_PROMISE","Promise","resolve","_preact$Component3","_this8","_len3","_key4","setSearchBox","setFocus","_split","rawType","changeFocus","_window$PS3","_editor$deletedSet","_window$PS4","moveSet","reverse","clearSearchBox","_editor$sets","pop","every","Boolean","loadSampleSet","setName","_TeamEditorState$samp","_ref5","_ref6","_data$dex$set$species","_data$dex","_data$dex2","_data$stats","_data$stats2","sid","setTemplate","applied","handleLoadUserSet","loadUserSet","searchBox","handleClickFilters","tagName","getAttribute","stopPropagation","parentElement","keyDownSearch","_editor$innerFocus","_editor$innerFocus2","_editor$innerFocus3","_value$split","_proto4","_TeamEditorState$clip4","sprite","rowSpan","overfull","cur","t","_editor$innerFocus4","isCur","src","resourcePrefix","alt","fxPrefix","mi","componentDidUpdate","filters","_filters$getBoundingC","getBoundingClientRect","paddingLeft","renderInnerFocus","_this9","_editor$innerFocus5","curSet","autocomplete","renderFilters","hideFilters","_this10","willNotMove","_clipboard$teams$edit","_clipboard$teams$edit2","_clipboard$teams$edit3","pasteControls","_editor$deletedSet2","disabled","_preact$Component4","_this11","_len4","_key5","handleGuess","_this11$props","guess","BattleStatGuesser","plusStat","minusStat","updateNatureFromPlusMinus","handleOptimize","_this11$props2","optimized","BattleStatOptimizer","changeEV","statID","abs","isNaN","maxEv","maxEVs","totalEv","_i37","_Object$values5","curEv","getNatureFromPlusMinus","changeIV","dvToIv","changeNature","changeIVSpread","_target$value$split$m","defaultEV","_set$evs$statID","_set$evs4","_BattleNatures3","_BattleNatures4","hue","statName","BattleStatNames","_proto5","renderIVMenu","_this$props2","hpIVdata","autoSpread","autoSpreadValue","selected","label","minStat","spread","smogdexLink","smogdexid","forme","generationNumber","number","generation","renderSpreadGuesser","_this$props3","href","role","guessedEVs","guessedPlus","guessedMinus","renderStatOptimizer","savedEVs","setInput","evInput","init","_querySelector","skipID","_i39","_Dex$statNames4","_set$evs5","_set$ivs","plusMinus","ivToDv","renderStatbar","dvOrIvString","dvOrIv","useEVs","Infinity","_this12","_this$props4","maxEV","stepEV","remaining","_i41","_Object$values7","_ref7","_set$evs$statID2","_set$evs6","inputMode","min","step","_ref8","natureName","curNature","_preact$Component5","_this13","_len5","_key6","changeNickname","changeTera","_this13$props","changeLevel","changeGender","changeHappiness","happiness","changeShiny","changeDynamaxLevel","dynamaxLevel","changeGigantamax","gigantamax","changeHPType","selectSprite","formId","_this13$props2","_proto6","_querySelector2","nickname","renderGender","genderTable","_set$level","_set$happiness","_set$dynamaxLevel","_this14","_this$props5","cannotDynamax","canGigantamax","cosmeticFormes","_species$cosmeticForm","baseId","forms","sp","padding","baseForme"],"sources":["../src/battle-team-editor.tsx"],"sourcesContent":["/**\n * Teambuilder team editor, extracted from the rest of the Preact\n * client so that it can be used in isolation.\n *\n * @author Guangcong Luo <guangcongluo@gmail.com>\n * @license AGPLv3\n */\n\nimport preact from \"../js/lib/preact\";\nimport { type Team, Config } from \"./client-main\";\nimport { Dex, type ModdedDex, toID, type ID, PSUtils } from \"./battle-dex\";\nimport { Teams } from './battle-teams';\nimport { DexSearch, type SearchRow, type SearchType } from \"./battle-dex-search\";\nimport { PSSearchResults } from \"./battle-searchresults\";\nimport { BattleNatures, BattleStatNames, type StatName } from \"./battle-dex-data\";\nimport { BattleStatGuesser, BattleStatOptimizer } from \"./battle-tooltips\";\nimport { PSModel } from \"./client-core\";\nimport { Net } from \"./client-connection\";\nimport { PSIcon } from \"./panels\";\n\ntype SelectionType = 'pokemon' | 'ability' | 'item' | 'move' | 'stats' | 'details';\n\ntype SampleSets = {\n\t[speciesName: string]: {\n\t\t[setName: string]: Dex.PokemonSet,\n\t},\n};\ntype SampleSetsTable = { dex?: SampleSets, stats?: SampleSets };\n\nclass TeamEditorState extends PSModel {\n\tstatic clipboard: {\n\t\tteams: {\n\t\t\t[teamKey: string]: {\n\t\t\t\tteam: Team,\n\t\t\t\tsets: { [index: number]: Dex.PokemonSet },\n\t\t\t\t/** whether to delete the team itself when moving it */\n\t\t\t\tentire: boolean,\n\t\t\t},\n\t\t} | null,\n\t\totherSets: Dex.PokemonSet[] | null,\n\t\treadonly: boolean,\n\t} | null = null;\n\tteam: Team;\n\tsets: Dex.PokemonSet[] = [];\n\tlastPackedTeam = '';\n\tgen = Dex.gen;\n\tdex: ModdedDex = Dex;\n\tdeletedSet: {\n\t\tset: Dex.PokemonSet,\n\t\tindex: number,\n\t} | null = null;\n\tsearch = new DexSearch();\n\tformat: ID = `gen${this.gen}` as ID;\n\tsearchIndex = 0;\n\toriginalSpecies: string | null = null;\n\tnarrow = false;\n\tselectionTypeOrder: readonly SelectionType[] = [\n\t\t'pokemon', 'ability', 'item', 'move', 'stats', 'details',\n\t];\n\tinnerFocus: {\n\t\tsetIndex: number,\n\t\ttype: SelectionType,\n\t\ttypeIndex?: number,\n\t} | null = null;\n\tisLetsGo = false;\n\tisNatDex = false;\n\tisBDSP = false;\n\tformeLegality: 'normal' | 'hackmons' | 'custom' = 'normal';\n\tabilityLegality: 'normal' | 'hackmons' = 'normal';\n\tdefaultLevel = 100;\n\treadonly = false;\n\tfetching = false;\n\tprivate userSetsCache: Record<ID, { [species: string]: { [setName: string]: Dex.PokemonSet } }> = {};\n\tconstructor(team: Team) {\n\t\tsuper();\n\t\tthis.team = team;\n\t\tthis.updateTeam(false);\n\t\tthis.setFormat(team.format);\n\t\twindow.search = this.search;\n\t}\n\tupdateTeam(readonly: boolean) {\n\t\tif (this.lastPackedTeam !== this.team.packedTeam) {\n\t\t\tthis.sets = Teams.unpack(this.team.packedTeam);\n\t\t\tthis.lastPackedTeam = this.team.packedTeam;\n\t\t}\n\t\tthis.readonly = readonly;\n\t}\n\tsetFormat(format: string) {\n\t\tconst team = this.team;\n\t\tconst formatid = toID(format);\n\t\tthis.format = formatid;\n\t\tteam.format = formatid;\n\t\tthis.dex = Dex.forFormat(formatid);\n\t\tthis.gen = this.dex.gen;\n\n\t\tformat = toID(format).slice(4);\n\t\tthis.isLetsGo = formatid.includes('letsgo');\n\t\tthis.isNatDex = formatid.includes('nationaldex') || formatid.includes('natdex');\n\t\tthis.isBDSP = formatid.includes('bdsp');\n\t\tif (formatid.includes('almostanyability') || formatid.includes('aaa')) {\n\t\t\tthis.abilityLegality = 'hackmons';\n\t\t} else {\n\t\t\tthis.abilityLegality = 'normal';\n\t\t}\n\t\tif (formatid.includes('hackmons') || formatid.includes('bh')) {\n\t\t\tthis.formeLegality = 'hackmons';\n\t\t\tthis.abilityLegality = 'hackmons';\n\t\t} else if (formatid.includes('metronome') || formatid.includes('customgame')) {\n\t\t\tthis.formeLegality = 'custom';\n\t\t\tthis.abilityLegality = 'hackmons';\n\t\t} else {\n\t\t\tthis.formeLegality = 'normal';\n\t\t}\n\n\t\tthis.defaultLevel = 100;\n\t\tif (\n\t\t\tformatid.includes('vgc') || formatid.includes('bss') || formatid.includes('ultrasinnohclassic') ||\n\t\t\tformatid.includes('battlespot') || formatid.includes('battlestadium') || formatid.includes('battlefestival')\n\t\t) {\n\t\t\tthis.defaultLevel = 50;\n\t\t}\n\t\tif (formatid.includes('lc')) {\n\t\t\tthis.defaultLevel = 5;\n\t\t}\n\t}\n\tsetSearchType(type: SearchType, i: number, value?: string) {\n\t\tconst set = this.sets[i];\n\t\tthis.search.setType(type, this.format, set);\n\t\tthis.originalSpecies = null;\n\t\tthis.search.prependResults = null;\n\t\tif (type === 'move') {\n\t\t\tthis.search.prependResults = this.getSearchMoves(set);\n\t\t\tif (value && this.search.prependResults.some(row => row[1].split('_')[2] === toID(value))) {\n\t\t\t\tvalue = '';\n\t\t\t}\n\t\t} else if (value) {\n\t\t\tswitch (type) {\n\t\t\tcase 'pokemon':\n\t\t\t\tif (this.dex.species.get(value).exists) {\n\t\t\t\t\tthis.originalSpecies = value;\n\t\t\t\t\tthis.search.prependResults = [['pokemon', toID(value)]];\n\t\t\t\t\tvalue = '';\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'item':\n\t\t\t\tif (toID(value) === 'noitem') value = '';\n\t\t\t\tif (this.dex.items.get(value).exists) {\n\t\t\t\t\tthis.search.prependResults = [['item', toID(value)]];\n\t\t\t\t\tvalue = '';\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'ability':\n\t\t\t\tif (toID(value) === 'selectability') value = '';\n\t\t\t\tif (toID(value) === 'noability') value = '';\n\t\t\t\tif (this.dex.abilities.get(value).exists) {\n\t\t\t\t\tthis.search.prependResults = [['ability', toID(value)]];\n\t\t\t\t\tvalue = '';\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (type === 'item') (this.search.prependResults ||= []).push(['item', '' as ID]);\n\t\tthis.search.find(value || '');\n\t\tthis.searchIndex = this.search.results?.[0]?.[0] === 'header' ? 1 : 0;\n\t}\n\tupdateSearchMoves(set: Dex.PokemonSet) {\n\t\tlet oldResultsLength = this.search.prependResults?.length || 0;\n\t\tthis.search.prependResults = this.getSearchMoves(set);\n\t\tthis.searchIndex += this.search.prependResults.length - oldResultsLength;\n\t\tif (this.searchIndex < 0) this.searchIndex = 0;\n\t\tthis.search.results = null;\n\t\tif (this.search.query) {\n\t\t\tthis.setSearchValue('');\n\t\t} else {\n\t\t\tthis.search.find('');\n\t\t}\n\t}\n\tgetSearchMoves(set: Dex.PokemonSet) {\n\t\tconst out: SearchRow[] = [];\n\t\tfor (let i = 0; i < Math.max(set.moves.length, 4); i++) {\n\t\t\tout.push(['move', `_${i + 1}_${toID(set.moves[i] || '')}` as ID]);\n\t\t}\n\t\treturn out;\n\t}\n\tsetSearchValue(value: string) {\n\t\tthis.search.find(value);\n\t\tthis.searchIndex = this.search.results?.[0]?.[0] === 'header' ? 1 : 0;\n\t}\n\tselectSearchValue(): string | null {\n\t\tlet result = this.search.results?.[this.searchIndex];\n\t\tif (result?.[0] === 'header') {\n\t\t\tthis.searchIndex++;\n\t\t\tresult = this.search.results?.[this.searchIndex];\n\t\t}\n\t\tif (!result) return null;\n\t\tif (this.search.addFilter(result)) {\n\t\t\tthis.searchIndex = 0;\n\t\t\treturn null;\n\t\t}\n\t\treturn this.getResultValue(result);\n\t}\n\tchangeSpecies(set: Dex.PokemonSet, speciesName: string) {\n\t\tconst species = this.dex.species.get(speciesName);\n\t\tif (set.item === this.getDefaultItem(set.species)) set.item = undefined;\n\t\tif (set.name === set.species.split('-')[0]) delete set.name;\n\t\tset.species = species.name;\n\t\tset.ability = this.getDefaultAbility(set);\n\t\tset.item = this.getDefaultItem(species.name) ?? set.item;\n\n\t\tif (toID(speciesName) === 'Cathy') {\n\t\t\tset.name = \"Cathy\";\n\t\t\tset.species = 'Trevenant';\n\t\t\tset.level = undefined;\n\t\t\tset.gender = 'F';\n\t\t\tset.item = 'Starf Berry';\n\t\t\tset.ability = 'Harvest';\n\t\t\tset.moves = ['Substitute', 'Horn Leech', 'Earthquake', 'Phantom Force'];\n\t\t\tset.evs = { hp: 36, atk: 252, def: 0, spa: 0, spd: 0, spe: 220 };\n\t\t\tset.ivs = undefined;\n\t\t\tset.nature = 'Jolly';\n\t\t}\n\t}\n\tdeleteSet(index: number) {\n\t\tif (this.sets.length <= index) return;\n\t\tthis.deletedSet = {\n\t\t\tset: this.sets[index],\n\t\t\tindex,\n\t\t};\n\t\tthis.sets.splice(index, 1);\n\t}\n\tundeleteSet() {\n\t\tif (!this.deletedSet) return;\n\t\tthis.sets.splice(this.deletedSet.index, 0, this.deletedSet.set);\n\t\tthis.deletedSet = null;\n\t}\n\tcopySet(index: number) {\n\t\tif (this.sets.length <= index) return;\n\n\t\tTeamEditorState.clipboard ||= {\n\t\t\tteams: {},\n\t\t\totherSets: null,\n\t\t\treadonly: false,\n\t\t};\n\t\tTeamEditorState.clipboard.teams ||= {};\n\t\tTeamEditorState.clipboard.teams[this.team.key] ||= {\n\t\t\tteam: this.team, sets: {}, entire: false,\n\t\t};\n\t\tif (this.readonly) TeamEditorState.clipboard.readonly = true;\n\n\t\tif (TeamEditorState.clipboard.teams[this.team.key].sets[index] === this.sets[index]) {\n\t\t\t// remove\n\t\t\tdelete TeamEditorState.clipboard.teams[this.team.key].sets[index];\n\t\t\tif (!Object.keys(TeamEditorState.clipboard.teams[this.team.key].sets).length) {\n\t\t\t\tdelete TeamEditorState.clipboard.teams[this.team.key];\n\t\t\t}\n\t\t\tif (!Object.keys(TeamEditorState.clipboard.teams).length) {\n\t\t\t\tTeamEditorState.clipboard.teams = null;\n\t\t\t\tif (!TeamEditorState.clipboard.otherSets) {\n\t\t\t\t\tTeamEditorState.clipboard = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tTeamEditorState.clipboard.teams[this.team.key].sets[index] = this.sets[index];\n\t}\n\tpasteSet(index: number, isMove?: boolean) {\n\t\tif (!TeamEditorState.clipboard) return;\n\t\tif (this.readonly) return;\n\n\t\tif (isMove) {\n\t\t\tif (TeamEditorState.clipboard.readonly) return;\n\n\t\t\tfor (const key in TeamEditorState.clipboard.teams) {\n\t\t\t\tconst clipboardTeam = TeamEditorState.clipboard.teams[key];\n\t\t\t\tconst sources = Object.keys(clipboardTeam.sets).map(Number);\n\t\t\t\t// descending order, so splices won't affect future indices\n\t\t\t\tsources.sort((a, b) => -(a - b));\n\t\t\t\tfor (const source of sources) {\n\t\t\t\t\tif (key === this.team.key) {\n\t\t\t\t\t\tthis.sets.splice(source, 1);\n\t\t\t\t\t\tif (source < index) index--;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst team = clipboardTeam.team;\n\t\t\t\t\t\tconst sets = Teams.unpack(team.packedTeam);\n\t\t\t\t\t\tsets.splice(source, 1);\n\t\t\t\t\t\tteam.packedTeam = Teams.pack(sets);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst sets: Dex.PokemonSet[] = [];\n\t\tfor (const key in TeamEditorState.clipboard.teams) {\n\t\t\tconst clipboardTeam = TeamEditorState.clipboard.teams[key];\n\t\t\tfor (const set of Object.values(clipboardTeam.sets)) {\n\t\t\t\tsets.push(set);\n\t\t\t}\n\t\t}\n\t\tsets.push(...TeamEditorState.clipboard.otherSets || []);\n\n\t\tfor (const set of sets) {\n\t\t\t// not the most efficient way to deepclone but we don't need efficiency here\n\t\t\tconst newSet = JSON.parse(JSON.stringify(set)) as Dex.PokemonSet;\n\t\t\tthis.sets.splice(index, 0, newSet);\n\t\t\tindex++;\n\t\t}\n\t\tTeamEditorState.clipboard = null;\n\t}\n\tignoreRows = ['header', 'sortpokemon', 'sortmove', 'html'];\n\tdownSearchValue() {\n\t\tif (!this.search.results || this.searchIndex >= this.search.results.length - 1) return;\n\n\t\tthis.searchIndex++;\n\t\tif (this.ignoreRows.includes(this.search.results[this.searchIndex]?.[0])) {\n\t\t\tif (this.searchIndex >= this.search.results.length - 1) return;\n\t\t\tthis.searchIndex++;\n\t\t}\n\t\tif (this.ignoreRows.includes(this.search.results[this.searchIndex]?.[0])) {\n\t\t\tif (this.searchIndex >= this.search.results.length - 1) return;\n\t\t\tthis.searchIndex++;\n\t\t}\n\t}\n\tupSearchValue() {\n\t\tif (!this.search.results || this.searchIndex <= 0) return;\n\n\t\tif (this.searchIndex <= 1 && this.ignoreRows.includes(this.search.results[0]?.[0])) return;\n\t\tthis.searchIndex--;\n\t\tif (this.ignoreRows.includes(this.search.results[this.searchIndex]?.[0])) {\n\t\t\tif (this.searchIndex <= 0) return;\n\t\t\tthis.searchIndex--;\n\t\t}\n\t\tif (this.ignoreRows.includes(this.search.results[this.searchIndex]?.[0])) {\n\t\t\tif (this.searchIndex <= 0) return;\n\t\t\tthis.searchIndex--;\n\t\t}\n\t}\n\tgetResultValue(result: SearchRow): string {\n\t\tswitch (result[0]) {\n\t\tcase 'pokemon':\n\t\t\treturn this.dex.species.get(result[1]).name;\n\t\tcase 'item':\n\t\t\treturn this.dex.items.get(result[1]).name;\n\t\tcase 'ability':\n\t\t\treturn this.dex.abilities.get(result[1]).name;\n\t\tcase 'move':\n\t\t\tif (result[1].startsWith('_')) {\n\t\t\t\tconst [slot, moveid] = result[1].slice(1).split('_');\n\t\t\t\treturn this.dex.moves.get(moveid).name + '|' + slot;\n\t\t\t}\n\t\t\treturn this.dex.moves.get(result[1]).name;\n\t\tcase 'html':\n\t\tcase 'header':\n\t\t\treturn '';\n\t\tdefault:\n\t\t\treturn result[1];\n\t\t}\n\t}\n\tcanAdd(): boolean {\n\t\treturn this.sets.length < 6 || this.team.isBox;\n\t}\n\tgetHPType(set: Dex.PokemonSet): Dex.TypeName {\n\t\tif (set.hpType) return set.hpType as Dex.TypeName;\n\t\tconst hpMove = set.ivs ? null : this.getHPMove(set);\n\t\tif (hpMove) return hpMove;\n\n\t\tconst hpTypes = [\n\t\t\t'Fighting', 'Flying', 'Poison', 'Ground', 'Rock', 'Bug', 'Ghost', 'Steel', 'Fire', 'Water', 'Grass', 'Electric', 'Psychic', 'Ice', 'Dragon', 'Dark',\n\t\t] as const;\n\t\tif (this.gen <= 2) {\n\t\t\tif (!set.ivs) return 'Dark';\n\t\t\t// const hpDV = Math.floor(set.ivs.hp / 2);\n\t\t\tconst atkDV = Math.floor(set.ivs.atk / 2);\n\t\t\tconst defDV = Math.floor(set.ivs.def / 2);\n\t\t\t// const speDV = Math.floor(set.ivs.spe / 2);\n\t\t\t// const spcDV = Math.floor(set.ivs.spa / 2);\n\t\t\t// const expectedHpDV = (atkDV % 2) * 8 + (defDV % 2) * 4 + (speDV % 2) * 2 + (spcDV % 2);\n\t\t\t// if (expectedHpDV !== hpDV) {\n\t\t\t// \tset.ivs.hp = expectedHpDV * 2;\n\t\t\t// \tif (set.ivs.hp === 30) set.ivs.hp = 31;\n\t\t\t// }\n\t\t\treturn hpTypes[4 * (atkDV % 4) + (defDV % 4)];\n\t\t} else {\n\t\t\tconst ivs = set.ivs || this.defaultIVs(set);\n\t\t\tlet hpTypeX = 0;\n\t\t\tlet i = 1;\n\t\t\t// n.b. this is not our usual order (Spe and SpD are flipped)\n\t\t\tconst statOrder = ['hp', 'atk', 'def', 'spe', 'spa', 'spd'] as const;\n\t\t\tfor (const s of statOrder) {\n\t\t\t\tif (ivs[s] === undefined) ivs[s] = 31;\n\t\t\t\thpTypeX += i * (ivs[s] % 2);\n\t\t\t\ti *= 2;\n\t\t\t}\n\t\t\treturn hpTypes[Math.floor(hpTypeX * 15 / 63)];\n\t\t}\n\t};\n\thpTypeMatters(set: Dex.PokemonSet): boolean {\n\t\tif (this.gen < 2) return false;\n\t\tif (this.gen > 7) return false;\n\t\tfor (const move of set.moves) {\n\t\t\tconst moveid = toID(move);\n\t\t\tif (moveid.startsWith('hiddenpower')) return true;\n\t\t\tif (moveid === 'transform') return true;\n\t\t}\n\t\tif (toID(set.ability) === 'imposter') return true;\n\t\treturn false;\n\t}\n\tgetHPMove(set: Dex.PokemonSet): Dex.TypeName | null {\n\t\tif (set.moves) {\n\t\t\tfor (const move of set.moves) {\n\t\t\t\tconst moveid = toID(move);\n\t\t\t\tif (moveid.startsWith('hiddenpower')) {\n\t\t\t\t\treturn moveid.charAt(11).toUpperCase() + moveid.slice(12) as Dex.TypeName;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\tgetIVs(set: Dex.PokemonSet) {\n\t\tconst ivs = this.defaultIVs(set);\n\t\tif (set.ivs) Object.assign(ivs, set.ivs);\n\t\treturn ivs;\n\t}\n\tdefaultIVs(set: Dex.PokemonSet, noGuess = !!set.ivs): Record<Dex.StatName, number> {\n\t\tconst useIVs = this.gen > 2;\n\t\tconst defaultIVs = { hp: 31, atk: 31, def: 31, spa: 31, spd: 31, spe: 31 };\n\t\tif (!useIVs) {\n\t\t\tfor (const stat of Dex.statNames) defaultIVs[stat] = 15;\n\t\t}\n\t\tif (noGuess) return defaultIVs;\n\n\t\tconst hpType = this.getHPMove(set);\n\t\tconst hpModulo = (useIVs ? 2 : 4);\n\t\tconst { minAtk, minSpe } = this.prefersMinStats(set);\n\t\tif (minAtk) defaultIVs['atk'] = 0;\n\t\tif (minSpe) defaultIVs['spe'] = 0;\n\n\t\tif (!useIVs) {\n\t\t\tconst hpDVs = hpType ? this.dex.types.get(hpType).HPdvs : null;\n\t\t\tif (hpDVs) {\n\t\t\t\tfor (const stat in hpDVs) defaultIVs[stat as Dex.StatName] = hpDVs[stat as Dex.StatName]!;\n\t\t\t}\n\t\t} else {\n\t\t\tconst hpIVs = hpType ? this.dex.types.get(hpType).HPivs : null;\n\t\t\tif (hpIVs) {\n\t\t\t\tif (this.canHyperTrain(set)) {\n\t\t\t\t\tif (minSpe) defaultIVs['spe'] = hpIVs['spe'] ?? 31;\n\t\t\t\t\tif (minAtk) defaultIVs['atk'] = hpIVs['atk'] ?? 31;\n\t\t\t\t} else {\n\t\t\t\t\tfor (const stat in hpIVs) defaultIVs[stat as Dex.StatName] = hpIVs[stat as Dex.StatName]!;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (hpType) {\n\t\t\tif (minSpe) defaultIVs['spe'] %= hpModulo;\n\t\t\tif (minAtk) defaultIVs['atk'] %= hpModulo;\n\t\t}\n\t\tif (minAtk && useIVs) {\n\t\t\t// min Atk\n\t\t\tif (['Gouging Fire', 'Iron Boulder', 'Iron Crown', 'Raging Bolt'].includes(set.species)) {\n\t\t\t\t// only available with 20 Atk IVs\n\t\t\t\tdefaultIVs['atk'] = 20;\n\t\t\t} else if (set.species.startsWith('Terapagos')) {\n\t\t\t\t// only available with 15 Atk IVs\n\t\t\t\tdefaultIVs['atk'] = 15;\n\t\t\t}\n\t\t}\n\t\treturn defaultIVs;\n\t}\n\tdefaultHappiness(set: Dex.PokemonSet) {\n\t\tif (set.moves.includes('Return')) return 255;\n\t\tif (set.moves.includes('Frustration')) return 0;\n\t\treturn undefined;\n\t}\n\tprefersMinStats(set: Dex.PokemonSet) {\n\t\tlet minSpe = !set.evs?.spe && set.moves.includes('Gyro Ball');\n\t\tlet minAtk = !set.evs?.atk;\n\n\t\t// only available through an event with 31 Spe IVs\n\t\tif (set.species.startsWith('Terapagos')) minSpe = false;\n\n\t\tif (this.format === 'gen7hiddentype') return { minAtk, minSpe };\n\t\tif (this.format.includes('1v1')) return { minAtk, minSpe };\n\n\t\t// only available through an event with 31 Atk IVs\n\t\tif (set.ability === 'Battle Bond' || ['Koraidon', 'Miraidon', 'Gimmighoul-Roaming'].includes(set.species)) {\n\t\t\tminAtk = false;\n\t\t\treturn { minAtk, minSpe };\n\t\t}\n\t\tif (!set.moves.length) minAtk = false;\n\t\tfor (const moveName of set.moves) {\n\t\t\tif (!moveName) continue;\n\t\t\tconst move = this.dex.moves.get(moveName);\n\t\t\tif (move.id === 'transform') {\n\t\t\t\tconst hasMoveBesidesTransform = set.moves.length > 1;\n\t\t\t\tif (!hasMoveBesidesTransform) minAtk = false;\n\t\t\t} else if (\n\t\t\t\tmove.category === 'Physical' && !move.damage && !move.ohko &&\n\t\t\t\t!['foulplay', 'endeavor', 'counter', 'bodypress', 'seismictoss', 'bide', 'metalburst', 'superfang'].includes(move.id) &&\n\t\t\t\t!(this.gen < 8 && move.id === 'rapidspin')\n\t\t\t) {\n\t\t\t\tminAtk = false;\n\t\t\t} else if (\n\t\t\t\t['metronome', 'assist', 'copycat', 'mefirst', 'photongeyser', 'shellsidearm', 'terablast'].includes(move.id) ||\n\t\t\t\t(this.gen === 5 && move.id === 'naturepower')\n\t\t\t) {\n\t\t\t\tminAtk = false;\n\t\t\t}\n\t\t}\n\n\t\treturn { minAtk, minSpe };\n\t}\n\tgetNickname(set: Dex.PokemonSet) {\n\t\treturn set.name || this.dex.species.get(set.species).baseSpecies || '';\n\t}\n\tcanHyperTrain(set: Dex.PokemonSet) {\n\t\tlet format: string = this.format;\n\t\tif (this.gen < 7 || format === 'gen7hiddentype') return false;\n\t\tif ((set.level || this.defaultLevel) === 100) return true;\n\t\tif ((set.level || this.defaultLevel) >= 50 && this.defaultLevel === 50) return true;\n\t\treturn false;\n\t}\n\tgetHPIVs(hpType: Dex.TypeName | null) {\n\t\tswitch (hpType) {\n\t\tcase 'Dark':\n\t\t\treturn ['111111'];\n\t\tcase 'Dragon':\n\t\t\treturn ['011111', '101111', '110111'];\n\t\tcase 'Ice':\n\t\t\treturn ['010111', '100111', '111110'];\n\t\tcase 'Psychic':\n\t\t\treturn ['011110', '101110', '110110'];\n\t\tcase 'Electric':\n\t\t\treturn ['010110', '100110', '111011'];\n\t\tcase 'Grass':\n\t\t\treturn ['011011', '101011', '110011'];\n\t\tcase 'Water':\n\t\t\treturn ['100011', '111010'];\n\t\tcase 'Fire':\n\t\t\treturn ['101010', '110010'];\n\t\tcase 'Steel':\n\t\t\treturn ['100010', '111101'];\n\t\tcase 'Ghost':\n\t\t\treturn ['101101', '110101'];\n\t\tcase 'Bug':\n\t\t\treturn ['100101', '111100', '101100'];\n\t\tcase 'Rock':\n\t\t\treturn ['001100', '110100', '100100'];\n\t\tcase 'Ground':\n\t\t\treturn ['000100', '111001', '101001'];\n\t\tcase 'Poison':\n\t\t\treturn ['001001', '110001', '100001'];\n\t\tcase 'Flying':\n\t\t\treturn ['000001', '111000', '101000'];\n\t\tcase 'Fighting':\n\t\t\treturn ['001000', '110000', '100000'];\n\t\tdefault:\n\t\t\treturn null;\n\t\t}\n\t}\n\tgetStat(stat: StatName, set: Dex.PokemonSet, ivOverride: number, evOverride?: number, natureOverride?: number) {\n\t\tconst team = this.team;\n\n\t\tconst supportsEVs = !team.format.includes('letsgo');\n\t\tconst supportsAVs = !supportsEVs;\n\n\t\t// do this after setting set.evs because it's assumed to exist\n\t\t// after getStat is run\n\t\tconst species = this.dex.species.get(set.species);\n\t\tif (!species.exists) return 0;\n\n\t\tconst level = set.level || this.defaultLevel;\n\n\t\tconst baseStat = species.baseStats[stat];\n\t\tconst iv = ivOverride;\n\t\tconst ev = evOverride ?? set.evs?.[stat] ?? (this.gen > 2 ? 0 : 252);\n\n\t\tif (stat === 'hp') {\n\t\t\tif (baseStat === 1) return 1;\n\t\t\tif (!supportsEVs) return Math.trunc(Math.trunc(2 * baseStat + iv + 100) * level / 100 + 10) + (supportsAVs ? ev : 0);\n\t\t\treturn Math.trunc(Math.trunc(2 * baseStat + iv + Math.trunc(ev / 4) + 100) * level / 100 + 10);\n\t\t}\n\t\tlet val = Math.trunc(Math.trunc(2 * baseStat + iv + Math.trunc(ev / 4)) * level / 100 + 5);\n\t\tif (!supportsEVs) {\n\t\t\tval = Math.trunc(Math.trunc(2 * baseStat + iv) * level / 100 + 5);\n\t\t}\n\t\tif (natureOverride) {\n\t\t\tval *= natureOverride;\n\t\t} else if (BattleNatures[set.nature!]?.plus === stat) {\n\t\t\tval *= 1.1;\n\t\t} else if (BattleNatures[set.nature!]?.minus === stat) {\n\t\t\tval *= 0.9;\n\t\t}\n\t\tif (!supportsEVs) {\n\t\t\tconst friendshipValue = Math.trunc((70 / 255 / 10 + 1) * 100);\n\t\t\tval = Math.trunc(val) * friendshipValue / 100 + (supportsAVs ? ev : 0);\n\t\t}\n\t\treturn Math.trunc(val);\n\t}\n\texport(compat?: boolean) {\n\t\treturn Teams.export(this.sets, this.dex, !compat);\n\t}\n\timport(value: string) {\n\t\tthis.sets = Teams.import(value);\n\t\tthis.save();\n\t}\n\tgetTypeWeakness(type: Dex.TypeName, attackType: Dex.TypeName): 0 | 0.5 | 1 | 2 {\n\t\tconst weaknessType = this.dex.types.get(type).damageTaken?.[attackType];\n\t\tif (weaknessType === Dex.IMMUNE) return 0;\n\t\tif (weaknessType === Dex.RESIST) return 0.5;\n\t\tif (weaknessType === Dex.WEAK) return 2;\n\t\treturn 1;\n\t}\n\tgetWeakness(types: readonly Dex.TypeName[], abilityid: ID, attackType: Dex.TypeName): number {\n\t\tif (attackType === 'Ground' && abilityid === 'levitate') return 0;\n\t\tif (attackType === 'Water' && abilityid === 'dryskin') return 0;\n\t\tif (attackType === 'Fire' && abilityid === 'flashfire') return 0;\n\t\tif (attackType === 'Electric' && abilityid === 'lightningrod' && this.gen >= 5) return 0;\n\t\tif (attackType === 'Grass' && abilityid === 'sapsipper') return 0;\n\t\tif (attackType === 'Electric' && abilityid === 'motordrive') return 0;\n\t\tif (attackType === 'Water' && abilityid === 'stormdrain' && this.gen >= 5) return 0;\n\t\tif (attackType === 'Electric' && abilityid === 'voltabsorb') return 0;\n\t\tif (attackType === 'Water' && abilityid === 'waterabsorb') return 0;\n\t\tif (attackType === 'Ground' && abilityid === 'eartheater') return 0;\n\t\tif (attackType === 'Fire' && abilityid === 'wellbakedbody') return 0;\n\n\t\tif (attackType === 'Fire' && abilityid === 'primordialsea') return 0;\n\t\tif (attackType === 'Water' && abilityid === 'desolateland') return 0;\n\n\t\tif (abilityid === 'wonderguard') {\n\t\t\tfor (const type of types) {\n\t\t\t\tif (this.getTypeWeakness(type, attackType) <= 1) return 0;\n\t\t\t}\n\t\t}\n\n\t\tlet factor = 1;\n\t\tif ((attackType === 'Fire' || attackType === 'Ice') && abilityid === 'thickfat') factor *= 0.5;\n\t\tif (attackType === 'Fire' && abilityid === 'waterbubble') factor *= 0.5;\n\t\tif (attackType === 'Fire' && abilityid === 'heatproof') factor *= 0.5;\n\t\tif (attackType === 'Ghost' && abilityid === 'purifyingsalt') factor *= 0.5;\n\t\tif (attackType === 'Fire' && abilityid === 'fluffy') factor *= 2;\n\t\tif ((attackType === 'Electric' || attackType === 'Rock' || attackType === 'Ice') && abilityid === 'deltastream') {\n\t\t\tfactor *= 0.5;\n\t\t}\n\t\tfor (const type of types) {\n\t\t\tfactor *= this.getTypeWeakness(type, attackType);\n\t\t}\n\t\treturn factor;\n\t}\n\tpokemonDefensiveCoverage(set: Dex.PokemonSet) {\n\t\tconst coverage: Record<string, number> = {};\n\t\tconst species = this.dex.species.get(set.species);\n\t\tconst abilityid = toID(set.ability);\n\t\tfor (const type of this.dex.types.names()) {\n\t\t\tcoverage[type] = this.getWeakness(species.types, abilityid, type);\n\t\t}\n\t\treturn coverage as Record<Dex.TypeName, number>;\n\t}\n\tteamDefensiveCoverage() {\n\t\ttype Counter = { type: Dex.TypeName, resists: number, neutrals: number, weaknesses: number };\n\t\tconst counters: Record<Dex.TypeName, Counter> = {} as any;\n\t\tfor (const type of this.dex.types.names()) {\n\t\t\tcounters[type] = {\n\t\t\t\ttype,\n\t\t\t\tresists: 0,\n\t\t\t\tneutrals: 0,\n\t\t\t\tweaknesses: 0,\n\t\t\t};\n\t\t}\n\t\tfor (const set of this.sets) {\n\t\t\tconst coverage = this.pokemonDefensiveCoverage(set);\n\t\t\tfor (const [type, value] of Object.entries(coverage) as [Dex.TypeName, number][]) {\n\t\t\t\tif (value < 1) {\n\t\t\t\t\tcounters[type].resists++;\n\t\t\t\t} else if (value === 1) {\n\t\t\t\t\tcounters[type].neutrals++;\n\t\t\t\t} else {\n\t\t\t\t\tcounters[type].weaknesses++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn counters;\n\t}\n\tgetDefaultAbility(set: Dex.PokemonSet) {\n\t\tif (this.gen < 3 || this.isLetsGo || this.formeLegality === 'custom') return set.ability;\n\t\tconst species = this.dex.species.get(set.species);\n\t\tif (this.formeLegality === 'hackmons') {\n\t\t\t// TODO: support gen 9 hackmons forme legality more completely than this\n\t\t\tif (this.gen < 9 || species.baseSpecies !== 'Xerneas') return set.ability;\n\t\t\t// falls through to final return statement\n\t\t} else if (this.abilityLegality === 'hackmons') {\n\t\t\tif (!species.battleOnly) return set.ability;\n\t\t\tif (species.requiredItems.length || species.baseSpecies === 'Meloetta') return set.ability;\n\t\t\t// battle only species only ever have one ability\n\t\t\t// if they don't have a required item and aren't Meloetta, they change formes with that ability\n\t\t\t// so it's forced, even in AAA\n\t\t\treturn species.abilities[0];\n\t\t}\n\t\tconst abilities = Object.values(species.abilities);\n\t\tif (abilities.length === 1) return abilities[0];\n\t\tif (set.ability && abilities.includes(set.ability)) return set.ability;\n\t\treturn undefined;\n\t}\n\tgetDefaultItem(speciesName: string) {\n\t\tconst species = this.dex.species.get(speciesName);\n\t\tlet items = species.requiredItems;\n\t\tif (this.gen !== 7 && !this.isNatDex) {\n\t\t\t// Require plates on Arceus when Z crystals don't exist\n\t\t\titems = items.filter(i => !i.endsWith('ium Z'));\n\t\t}\n\t\tif (items.length === 1) {\n\t\t\tif (this.formeLegality === 'normal' ||\n\t\t\t\tthis.formeLegality === 'hackmons' && this.gen === 9 && species.battleOnly &&\n\t\t\t\t!species.isMega && !species.isPrimal && species.name !== 'Necrozma-Ultra') {\n\t\t\t\treturn items[0];\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\tsave() {\n\t\tthis.team.packedTeam = Teams.pack(this.sets);\n\t\tthis.lastPackedTeam = this.team.packedTeam;\n\t\tthis.team.iconCache = null;\n\t}\n\n\t/** undefined: loading, null: unavailable */\n\tstatic sampleSets: { [formatid: string]: SampleSetsTable | null } = {};\n\t// not static for complicated reasons. either way leads to an obscure\n\t// race condition if fetchSampleSets is called simultaneously from\n\t// different TeamEditorState instances, but this way just means two\n\t// network requests rather than the UI getting out of sync.\n\t_sampleSetPromises: Record<string, Promise<void>> = {};\n\tfetchSampleSets(formatid: ID) {\n\t\tif (formatid in TeamEditorState.sampleSets) return;\n\t\tif (formatid.length <= 4) {\n\t\t\tTeamEditorState.sampleSets[formatid] = null;\n\t\t\treturn;\n\t\t}\n\t\tif (!(formatid in this._sampleSetPromises)) {\n\t\t\tthis._sampleSetPromises[formatid] = Net(\n\t\t\t\t`https://${Config.routes.client}/data/sets/${formatid}.json`\n\t\t\t).get().then(json => {\n\t\t\t\tconst data = JSON.parse(json);\n\t\t\t\tTeamEditorState.sampleSets[formatid] = data;\n\t\t\t\tthis.update();\n\t\t\t}).catch(() => {\n\t\t\t\tTeamEditorState.sampleSets[formatid] = null;\n\t\t\t});\n\t\t}\n\t}\n\t/** returns null if sample sets aren't done loading */\n\tgetSampleSets(set: Dex.PokemonSet): string[] | null {\n\t\tconst d = TeamEditorState.sampleSets[this.format];\n\t\tif (d === undefined) {\n\t\t\tthis.fetchSampleSets(this.format);\n\t\t\treturn null;\n\t\t}\n\t\tif (!d?.dex) return [];\n\t\tconst speciesid = toID(set.species);\n\t\tconst all = {\n\t\t\t...d.dex[set.species],\n\t\t\t...d.dex[speciesid],\n\t\t\t...d.stats?.[set.species],\n\t\t\t...d.stats?.[speciesid],\n\t\t};\n\t\treturn Object.keys(all);\n\t}\n\t/** returns null if no boxes exist, empty array if no sets for this species */\n\tgetUserSets(set: Dex.PokemonSet): { [setName: string]: Dex.PokemonSet } | null {\n\t\tif (!this.userSetsCache[this.format]) {\n\t\t\tconst userSets: { [species: string]: { [setName: string]: Dex.PokemonSet } } = {};\n\n\t\t\tfor (const team of window.PS?.teams.list || []) {\n\t\t\t\tif (team.format !== this.format || !team.isBox) continue;\n\n\t\t\t\tconst setList = Teams.unpack(team.packedTeam);\n\t\t\t\tconst duplicateNameIndices: Record<string, number> = {};\n\n\t\t\t\tfor (const boxSet of setList) {\n\t\t\t\t\tlet name = boxSet.name || boxSet.species;\n\t\t\t\t\tif (duplicateNameIndices[name]) {\n\t\t\t\t\t\tname += ` ${duplicateNameIndices[name]}`;\n\t\t\t\t\t}\n\t\t\t\t\tduplicateNameIndices[name] = (duplicateNameIndices[name] || 0) + 1;\n\n\t\t\t\t\tuserSets[boxSet.species] ??= {};\n\t\t\t\t\tuserSets[boxSet.species][name] = boxSet;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.userSetsCache[this.format] = userSets;\n\t\t}\n\n\t\tconst cachedSets = this.userSetsCache[this.format];\n\t\tif (Object.keys(cachedSets).length === 0) return null;\n\t\treturn cachedSets[set.species] || {};\n\t}\n}\n\nexport class TeamEditor extends preact.Component<{\n\tteam: Team, narrow?: boolean, onChange?: () => void, readOnly?: boolean,\n\tchildren?: preact.ComponentChildren, resources?: preact.ComponentChildren,\n}> {\n\twizard = true;\n\teditor!: TeamEditorState;\n\tsetTab = (ev: Event) => {\n\t\tconst target = ev.currentTarget as HTMLButtonElement;\n\t\tconst wizard = target.value === 'wizard';\n\t\tthis.wizard = wizard;\n\t\tthis.forceUpdate();\n\t};\n\tstatic probablyMobile() {\n\t\treturn document.body.offsetWidth < 500;\n\t}\n\trenderDefensiveCoverage() {\n\t\tconst { editor } = this;\n\t\tif (editor.team.isBox) return null;\n\t\tif (!editor.sets.length) return null;\n\n\t\tconst counters = Object.values(editor.teamDefensiveCoverage());\n\t\tPSUtils.sortBy(counters, counter => [counter.resists, -counter.weaknesses]);\n\t\tconst good = [], medium = [], bad = [];\n\t\tconst renderTypeDefensive = (counter: typeof counters[number]) => (\n\t\t\t<tr>\n\t\t\t\t<th>{counter.type}</th>\n\t\t\t\t<td>{counter.resists} <small class=\"gray\">resist</small></td>\n\t\t\t\t<td>{counter.weaknesses} <small class=\"gray\">weak</small></td>\n\t\t\t</tr>\n\t\t);\n\t\tfor (const counter of counters) {\n\t\t\tif (counter.resists > 0) {\n\t\t\t\tgood.push(renderTypeDefensive(counter));\n\t\t\t} else if (counter.weaknesses <= 0) {\n\t\t\t\tmedium.push(renderTypeDefensive(counter));\n\t\t\t} else {\n\t\t\t\tbad.push(renderTypeDefensive(counter));\n\t\t\t}\n\t\t}\n\t\treturn <details class=\"details\">\n\t\t\t<summary>\n\t\t\t\t<strong>Defensive coverage</strong>\n\t\t\t\t<table class=\"details-preview table\">\n\t\t\t\t\t{bad}\n\t\t\t\t\t<tr><td colSpan={3}><span class=\"details-preview ilink\"><small>See all</small></span></td></tr>\n\t\t\t\t</table>\n\t\t\t</summary>\n\t\t\t<table class=\"table\">{bad}{medium}{good}</table>\n\t\t</details>;\n\t}\n\tcancelClipboard = () => {\n\t\tTeamEditorState.clipboard = null;\n\t\tthis.forceUpdate();\n\t};\n\tupdate = () => {\n\t\tthis.forceUpdate();\n\t};\n\trenderClipboard() {\n\t\tif (!TeamEditorState.clipboard) return null;\n\n\t\tconst renderSet = (set: Dex.PokemonSet) => <div class=\"set\">\n\t\t\t<small>\n\t\t\t\t<PSIcon pokemon={set} /> {set.name || set.species}\n\t\t\t\t{set.ability && ` [${set.ability}]`}{set.item && ` @ ${set.item}`}\n\t\t\t\t{} - {set.moves.join(' / ') || '(No moves)'}\n\t\t\t</small>\n\t\t</div>;\n\t\treturn <div class=\"infobox\">\n\t\t\tClipboard\n\t\t\t{Object.values(TeamEditorState.clipboard.teams || {})?.map(clipboardTeam => (\n\t\t\t\tObject.values(clipboardTeam.sets).map(set => renderSet(set))\n\t\t\t))}\n\t\t\t{TeamEditorState.clipboard.otherSets?.map(set => renderSet(set))}\n\t\t\t<button class=\"button\" onClick={this.cancelClipboard}>\n\t\t\t\t<i class=\"fa fa-times\" aria-hidden></i> Cancel\n\t\t\t</button>\n\t\t</div>;\n\t}\n\toverride render() {\n\t\tif (!this.editor) {\n\t\t\tthis.editor = new TeamEditorState(this.props.team);\n\t\t\tthis.editor.subscribe(() => {\n\t\t\t\tthis.forceUpdate();\n\t\t\t});\n\t\t}\n\t\tconst editor = this.editor;\n\t\twindow.editor = editor; // debug\n\t\teditor.updateTeam(!!this.props.readOnly);\n\t\teditor.narrow = this.props.narrow ?? document.body.offsetWidth < 500;\n\t\tif (this.props.team.format !== editor.format) {\n\t\t\teditor.setFormat(this.props.team.format);\n\t\t}\n\n\t\treturn <div class=\"teameditor\">\n\t\t\t<ul class=\"tabbar\">\n\t\t\t\t<li><button onClick={this.setTab} value=\"wizard\" class={`button${this.wizard ? ' cur' : ''}`}>\n\t\t\t\t\tWizard\n\t\t\t\t</button></li>\n\t\t\t\t<li><button onClick={this.setTab} value=\"import\" class={`button${!this.wizard ? ' cur' : ''}`}>\n\t\t\t\t\tImport/Export\n\t\t\t\t</button></li>\n\t\t\t</ul>\n\t\t\t{this.renderClipboard()}\n\t\t\t{this.wizard ? (\n\t\t\t\t<TeamWizard editor={editor} onChange={this.props.onChange} onUpdate={this.update} />\n\t\t\t) : (\n\t\t\t\t<TeamTextbox editor={editor} onChange={this.props.onChange} onUpdate={this.update} />\n\t\t\t)}\n\t\t\t{!this.editor.innerFocus && <>\n\t\t\t\t{this.props.children}\n\t\t\t\t<div class=\"team-resources\">\n\t\t\t\t\t<br /><hr /><br />\n\t\t\t\t\t{this.renderDefensiveCoverage()}\n\t\t\t\t\t{this.props.resources}\n\t\t\t\t</div>\n\t\t\t</>}\n\t\t</div>;\n\t}\n}\n\nclass TeamTextbox extends preact.Component<{\n\teditor: TeamEditorState,\n\tonChange?: () => void, onUpdate?: () => void,\n}> {\n\tstatic EMPTY_PROMISE = Promise.resolve(null);\n\teditor!: TeamEditorState;\n\tsetInfo: {\n\t\tspecies: string,\n\t\tbottomY: number,\n\t\tindex: number,\n\t}[] = [];\n\ttextbox: HTMLTextAreaElement = null!;\n\theightTester: HTMLTextAreaElement = null!;\n\tcompat = false;\n\t/** we changed the set but are delaying updates until the selection form is closed */\n\tsetDirty = false;\n\twindowing = true;\n\tselection: {\n\t\tsetIndex: number,\n\t\ttype: SelectionType | null,\n\t\ttypeIndex: number,\n\t\tlineRange: [number, number] | null,\n\t} | null = null;\n\tinnerFocus: {\n\t\toffsetY: number | null,\n\t\tsetIndex: number,\n\t\ttype: SelectionType,\n\t\t/** i.e. which move is this */\n\t\ttypeIndex: number,\n\t\trange: [number, number],\n\t\t/** if you edit, you'll change the range end, so it needs to be updated with this in mind */\n\t\trangeEndChar: string,\n\t} | null = null;\n\tgetYAt(index: number, fullLine?: boolean) {\n\t\tif (index < 0) return 10;\n\t\tif (index === 0) return 31;\n\t\tconst newValue = this.textbox.value.slice(0, index);\n\t\tthis.heightTester.value = fullLine && !newValue.endsWith('\\n') ? newValue + '\\n' : newValue;\n\t\treturn this.heightTester.scrollHeight;\n\t}\n\tinput = () => {\n\t\tthis.updateText();\n\t\tthis.save();\n\t};\n\tkeyUp = () => this.updateText(true);\n\tcontextMenu = (ev: MouseEvent) => {\n\t\tif (!ev.shiftKey) {\n\t\t\tconst hadInnerFocus = this.innerFocus?.range[1];\n\t\t\tthis.openInnerFocus();\n\t\t\tif (hadInnerFocus !== this.innerFocus?.range[1]) {\n\t\t\t\tev.preventDefault();\n\t\t\t\tev.stopImmediatePropagation();\n\t\t\t}\n\t\t}\n\t};\n\topenInnerFocus() {\n\t\tconst oldRange = this.selection?.lineRange;\n\t\tthis.updateText(true, true);\n\t\tif (this.selection) {\n\t\t\t// this shouldn't actually update anything, so the reference comparison is enough\n\t\t\tif (this.selection.lineRange === oldRange) return !!this.innerFocus;\n\t\t\tif (this.textbox.selectionStart === this.textbox.selectionEnd) {\n\t\t\t\tconst range = this.getSelectionTypeRange();\n\t\t\t\tif (range) this.textbox.setSelectionRange(range[0], range[1]);\n\t\t\t}\n\t\t}\n\t\treturn !!this.innerFocus;\n\t}\n\tkeyDown = (ev: KeyboardEvent) => {\n\t\tconst editor = this.editor;\n\t\tswitch (ev.keyCode) {\n\t\tcase 27: // escape\n\t\tcase 8: // backspace\n\t\t\tif (this.innerFocus) {\n\t\t\t\tconst atStart = (this.innerFocus.range[0] === this.textbox.selectionStart &&\n\t\t\t\t\tthis.innerFocus.range[0] === this.textbox.selectionEnd);\n\t\t\t\tif (ev.keyCode === 27 || atStart) {\n\t\t\t\t\tif (editor.search.removeFilter()) {\n\t\t\t\t\t\teditor.setSearchValue(this.getInnerFocusValue());\n\t\t\t\t\t\tthis.resetScroll();\n\t\t\t\t\t\tthis.forceUpdate();\n\t\t\t\t\t\tev.stopImmediatePropagation();\n\t\t\t\t\t\tev.preventDefault();\n\t\t\t\t\t} else if (this.closeMenu()) {\n\t\t\t\t\t\tev.stopImmediatePropagation();\n\t\t\t\t\t\tev.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 38: // up\n\t\t\tif (this.innerFocus) {\n\t\t\t\teditor.upSearchValue();\n\t\t\t\tconst resultsUp = this.base!.querySelector('.searchresults');\n\t\t\t\tif (resultsUp) {\n\t\t\t\t\tresultsUp.scrollTop = Math.max(0, editor.searchIndex * 33 - Math.trunc((window.innerHeight - 100) * 0.4));\n\t\t\t\t}\n\t\t\t\tthis.forceUpdate();\n\t\t\t\tev.preventDefault();\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 40: // down\n\t\t\tif (this.innerFocus) {\n\t\t\t\teditor.downSearchValue();\n\t\t\t\tconst resultsDown = this.base!.querySelector('.searchresults');\n\t\t\t\tif (resultsDown) {\n\t\t\t\t\tresultsDown.scrollTop = Math.max(0, editor.searchIndex * 33 - Math.trunc((window.innerHeight - 100) * 0.4));\n\t\t\t\t}\n\t\t\t\tthis.forceUpdate();\n\t\t\t\tev.preventDefault();\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 9: // tab\n\t\tcase 13: // enter\n\t\t\tif (ev.keyCode === 13 && ev.shiftKey) return;\n\t\t\tif (ev.altKey || ev.metaKey) return;\n\t\t\tif (!this.innerFocus) {\n\t\t\t\tif (this.maybeReplaceLine()) {\n\t\t\t\t\t// do nothing else\n\t\t\t\t} else if (\n\t\t\t\t\tthis.textbox.selectionStart === this.textbox.value.length &&\n\t\t\t\t\t(this.textbox.value.endsWith('\\n\\n') || !this.textbox.value)\n\t\t\t\t) {\n\t\t\t\t\tthis.addPokemon();\n\t\t\t\t} else if (!this.openInnerFocus()) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tev.stopImmediatePropagation();\n\t\t\t\tev.preventDefault();\n\t\t\t} else {\n\t\t\t\tconst result = this.editor.selectSearchValue();\n\t\t\t\tif (result !== null) {\n\t\t\t\t\tconst [name, moveSlot] = result.split('|');\n\t\t\t\t\tthis.selectResult(this.innerFocus.type, name, moveSlot);\n\t\t\t\t} else {\n\t\t\t\t\tthis.replaceNoFocus('', this.innerFocus.range[0], this.innerFocus.range[1]);\n\t\t\t\t\tthis.editor.setSearchValue('');\n\t\t\t\t\tthis.forceUpdate();\n\t\t\t\t}\n\t\t\t\tthis.resetScroll();\n\t\t\t\tev.stopImmediatePropagation();\n\t\t\t\tev.preventDefault();\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 80: // p\n\t\t\tif (ev.metaKey) {\n\t\t\t\twindow.PS?.alert(editor.export(this.compat));\n\t\t\t\tev.stopImmediatePropagation();\n\t\t\t\tev.preventDefault();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n\tmaybeReplaceLine = () => {\n\t\tif (this.textbox.selectionStart !== this.textbox.selectionEnd) return;\n\t\tconst current = this.textbox.selectionEnd;\n\t\tconst lineStart = this.textbox.value.lastIndexOf('\\n', current) + 1;\n\t\tconst value = this.textbox.value.slice(lineStart, current);\n\n\t\tconst pokepaste = /^https?:\\/\\/pokepast.es\\/([a-z0-9]+)(?:\\/.*)?$/.exec(value)?.[1];\n\t\tif (pokepaste) {\n\t\t\tthis.editor.fetching = true;\n\t\t\tNet(`https://pokepast.es/${pokepaste}/json`).get().then(json => {\n\t\t\t\tconst paste = JSON.parse(json);\n\t\t\t\tconst pasteTxt = paste.paste.replace(/\\r\\n/g, '\\n');\n\t\t\t\tif (this.textbox) {\n\t\t\t\t\t// make sure it's still there:\n\t\t\t\t\tconst valueIndex = this.textbox.value.indexOf(value);\n\t\t\t\t\tthis.replace(paste.paste.replace(/\\r\\n/g, '\\n'), valueIndex, valueIndex + value.length);\n\t\t\t\t} else {\n\t\t\t\t\tthis.editor.import(pasteTxt);\n\t\t\t\t}\n\t\t\t\tconst notes = paste[\"notes\"] as string;\n\t\t\t\tif (notes.startsWith(\"Format: \")) {\n\t\t\t\t\tconst formatid = toID(notes.slice(8));\n\t\t\t\t\tthis.editor.setFormat(formatid);\n\t\t\t\t}\n\t\t\t\tconst title = paste[\"title\"] as string;\n\t\t\t\tif (title && !title.startsWith('Untitled')) {\n\t\t\t\t\tthis.editor.team.name = title.replace(/[|\\\\/]/g, '');\n\t\t\t\t}\n\t\t\t\tthis.editor.fetching = false;\n\t\t\t\tthis.props.onUpdate?.();\n\t\t\t});\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t};\n\tgetInnerFocusValue() {\n\t\tif (!this.innerFocus) return '';\n\t\treturn this.textbox.value.slice(this.innerFocus.range[0], this.innerFocus.range[1]);\n\t}\n\tclearInnerFocus() {\n\t\tif (this.innerFocus) {\n\t\t\tif (this.innerFocus.type === 'pokemon') {\n\t\t\t\tconst value = this.getInnerFocusValue();\n\t\t\t\tif (!toID(value)) {\n\t\t\t\t\tthis.replaceNoFocus(this.editor.originalSpecies || '', this.innerFocus.range[0], this.innerFocus.range[1]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.innerFocus = null;\n\t\t}\n\t}\n\tcloseMenu = () => {\n\t\tif (this.innerFocus) {\n\t\t\tthis.clearInnerFocus();\n\t\t\tif (this.setDirty) {\n\t\t\t\tthis.updateText();\n\t\t\t\tthis.save();\n\t\t\t} else {\n\t\t\t\tthis.forceUpdate();\n\t\t\t}\n\t\t\tthis.textbox.focus();\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t};\n\tupdateText = (noTextChange?: boolean, autoSelect?: boolean | SelectionType) => {\n\t\tconst textbox = this.textbox;\n\t\tlet value = textbox.value;\n\t\tlet selectionStart = textbox.selectionStart || 0;\n\t\tlet selectionEnd = textbox.selectionEnd || 0;\n\n\t\tif (this.innerFocus) {\n\t\t\tif (!noTextChange) {\n\t\t\t\tlet lineEnd = this.textbox.value.indexOf('\\n', this.innerFocus.range[0]);\n\t\t\t\tif (lineEnd < 0) lineEnd = this.textbox.value.length;\n\t\t\t\tconst line = this.textbox.value.slice(this.innerFocus.range[0], lineEnd);\n\t\t\t\tif (this.innerFocus.rangeEndChar) {\n\t\t\t\t\tconst index = line.indexOf(this.innerFocus.rangeEndChar);\n\t\t\t\t\tif (index >= 0) lineEnd = this.innerFocus.range[0] + index;\n\t\t\t\t}\n\t\t\t\tthis.innerFocus.range[1] = lineEnd;\n\t\t\t}\n\t\t\tconst [start, end] = this.innerFocus.range;\n\t\t\tif (selectionStart >= start && selectionStart <= end && selectionEnd >= start && selectionEnd <= end) {\n\t\t\t\tif (!noTextChange) {\n\t\t\t\t\tthis.updateSearch();\n\t\t\t\t\tthis.setDirty = true;\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.clearInnerFocus();\n\t\t\tvalue = textbox.value;\n\t\t\tselectionStart = textbox.selectionStart || 0;\n\t\t\tselectionEnd = textbox.selectionEnd || 0;\n\t\t}\n\n\t\tif (this.setDirty) {\n\t\t\tthis.setDirty = false;\n\t\t\tnoTextChange = false;\n\t\t}\n\n\t\tthis.heightTester.style.width = `${textbox.offsetWidth}px`;\n\t\t/** index of `value` that we've parsed to */\n\t\tlet index = 0;\n\t\t/** for the set we're currently parsing */\n\t\tlet setIndex: number | null = null;\n\t\tlet nextSetIndex = 0;\n\t\tif (!noTextChange) this.setInfo = [];\n\t\tthis.selection = null;\n\n\t\twhile (index < value.length) {\n\t\t\tlet nlIndex = value.indexOf('\\n', index);\n\t\t\tif (nlIndex < 0) nlIndex = value.length;\n\t\t\tconst line = value.slice(index, nlIndex);\n\n\t\t\tif (!line.trim()) {\n\t\t\t\tsetIndex = null;\n\t\t\t\tindex = nlIndex + 1;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (setIndex === null && index && !noTextChange && this.setInfo.length) {\n\t\t\t\tthis.setInfo[this.setInfo.length - 1].bottomY = this.getYAt(index - 1);\n\t\t\t}\n\n\t\t\tif (setIndex === null) {\n\t\t\t\tif (!noTextChange) {\n\t\t\t\t\tconst atIndex = line.indexOf('@');\n\t\t\t\t\tlet species = atIndex >= 0 ? line.slice(0, atIndex).trim() : line.trim();\n\t\t\t\t\tif (species.endsWith(' (M)') || species.endsWith(' (F)')) {\n\t\t\t\t\t\tspecies = species.slice(0, -4);\n\t\t\t\t\t}\n\t\t\t\t\tif (species.endsWith(')')) {\n\t\t\t\t\t\tconst parenIndex = species.lastIndexOf(' (');\n\t\t\t\t\t\tif (parenIndex >= 0) {\n\t\t\t\t\t\t\tspecies = species.slice(parenIndex + 2, -1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.setInfo.push({\n\t\t\t\t\t\tspecies,\n\t\t\t\t\t\tbottomY: -1,\n\t\t\t\t\t\tindex,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tsetIndex = nextSetIndex;\n\t\t\t\tnextSetIndex++;\n\t\t\t}\n\n\t\t\tconst selectionEndCutoff = (selectionStart === selectionEnd ? nlIndex : nlIndex + 1);\n\t\t\tlet start = index, end = index + line.length;\n\t\t\tif (index <= selectionStart && selectionEnd <= selectionEndCutoff) {\n\t\t\t\t// both ends within range\n\t\t\t\tlet type: SelectionType | null = null;\n\t\t\t\tconst lcLine = line.toLowerCase().trim();\n\n\t\t\t\tif (lcLine.startsWith('ability:')) {\n\t\t\t\t\ttype = 'ability';\n\t\t\t\t} else if (lcLine.startsWith('-')) {\n\t\t\t\t\ttype = 'move';\n\t\t\t\t} else if (\n\t\t\t\t\t!lcLine || lcLine.startsWith('level:') || lcLine.startsWith('gender:') ||\n\t\t\t\t\t(lcLine + ':').startsWith('shiny:') || (lcLine + ':').startsWith('gigantamax:') ||\n\t\t\t\t\tlcLine.startsWith('tera type:') || lcLine.startsWith('dynamax level:')\n\t\t\t\t) {\n\t\t\t\t\ttype = 'details';\n\t\t\t\t} else if (\n\t\t\t\t\tlcLine.startsWith('ivs:') || lcLine.startsWith('evs:') ||\n\t\t\t\t\tlcLine.endsWith(' nature')\n\t\t\t\t) {\n\t\t\t\t\ttype = 'stats';\n\t\t\t\t} else {\n\t\t\t\t\ttype = 'pokemon';\n\t\t\t\t\tconst atIndex = line.indexOf('@');\n\t\t\t\t\tif (atIndex >= 0) {\n\t\t\t\t\t\tif (selectionStart > index + atIndex) {\n\t\t\t\t\t\t\ttype = 'item';\n\t\t\t\t\t\t\tstart = index + atIndex + 1;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tend = index + atIndex;\n\t\t\t\t\t\t\tif (line.charAt(atIndex - 1) === ']' || line.charAt(atIndex - 2) === ']') {\n\t\t\t\t\t\t\t\ttype = 'ability';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (typeof autoSelect === 'string') autoSelect = autoSelect === type;\n\t\t\t\tthis.selection = {\n\t\t\t\t\tsetIndex, type, lineRange: [start, end], typeIndex: 0,\n\t\t\t\t};\n\t\t\t\tif (autoSelect) this.engageFocus();\n\t\t\t}\n\n\t\t\tindex = nlIndex + 1;\n\t\t}\n\t\tif (!noTextChange) {\n\t\t\tconst end = value.endsWith('\\n\\n') ? value.length - 1 : value.length;\n\t\t\tconst bottomY = this.getYAt(end, true);\n\t\t\tif (this.setInfo.length) {\n\t\t\t\tthis.setInfo[this.setInfo.length - 1].bottomY = bottomY;\n\t\t\t}\n\n\t\t\ttextbox.style.height = `${bottomY + 100}px`;\n\t\t}\n\t\tthis.forceUpdate();\n\t};\n\tengageFocus(focus?: this['innerFocus']) {\n\t\tif (this.innerFocus && !focus) return;\n\t\tconst editor = this.editor;\n\t\tif (editor.readonly) return;\n\n\t\tif (!focus) {\n\t\t\tif (!this.selection?.type) return;\n\n\t\t\tconst range = this.getSelectionTypeRange();\n\t\t\tif (!range) return;\n\t\t\tconst { type, setIndex } = this.selection;\n\n\t\t\tlet rangeEndChar = this.textbox.value.charAt(range[1]);\n\t\t\tif (rangeEndChar === ' ') rangeEndChar += this.textbox.value.charAt(range[1] + 1);\n\t\t\tfocus = {\n\t\t\t\toffsetY: this.getYAt(range[0]),\n\t\t\t\tsetIndex,\n\t\t\t\ttype,\n\t\t\t\ttypeIndex: this.selection.typeIndex,\n\t\t\t\trange,\n\t\t\t\trangeEndChar,\n\t\t\t};\n\t\t}\n\t\tthis.innerFocus = focus;\n\n\t\tif (focus.type === 'details' || focus.type === 'stats') {\n\t\t\tthis.forceUpdate();\n\t\t\treturn;\n\t\t}\n\n\t\tconst value = this.textbox.value.slice(focus.range[0], focus.range[1]);\n\t\teditor.setSearchType(focus.type, focus.setIndex, value);\n\t\tthis.resetScroll();\n\t\tthis.textbox.setSelectionRange(focus.range[0], focus.range[1]);\n\t\tthis.forceUpdate();\n\t}\n\tupdateSearch() {\n\t\tif (!this.innerFocus) return;\n\t\tconst { range } = this.innerFocus;\n\t\tconst editor = this.editor;\n\t\tconst value = this.textbox.value.slice(range[0], range[1]);\n\n\t\teditor.setSearchValue(value);\n\t\tthis.resetScroll();\n\t\tthis.forceUpdate();\n\t}\n\tselectResult = (type: string | null, name: string, moveSlot?: string) => {\n\t\tif (type === null) {\n\t\t\tthis.resetScroll();\n\t\t\tthis.forceUpdate();\n\t\t} else if (!type) {\n\t\t\tthis.changeSet(this.innerFocus!.type, '');\n\t\t} else {\n\t\t\tthis.changeSet(type as SelectionType, name, moveSlot);\n\t\t}\n\t};\n\tgetSelectionTypeRange(): [number, number] | null {\n\t\tconst selection = this.selection;\n\t\tif (!selection?.lineRange) return null;\n\n\t\tlet [start, end] = selection.lineRange;\n\t\tlet lcLine = this.textbox.value.slice(start, end).toLowerCase();\n\t\tif (lcLine.endsWith('  ')) {\n\t\t\tend -= 2;\n\t\t\tlcLine = lcLine.slice(0, -2);\n\t\t}\n\n\t\tswitch (selection.type) {\n\t\tcase 'pokemon': {\n\t\t\t// let atIndex = lcLine.lastIndexOf('@');\n\t\t\t// if (atIndex >= 0) {\n\t\t\t// \tif (lcLine.charAt(atIndex - 1) === ' ') atIndex--;\n\t\t\t// \tlcLine = lcLine.slice(0, atIndex);\n\t\t\t// \tend = start + atIndex;\n\t\t\t// }\n\n\t\t\tif (lcLine.endsWith(' ')) {\n\t\t\t\tlcLine = lcLine.slice(0, -1);\n\t\t\t\tend--;\n\t\t\t}\n\n\t\t\tif (lcLine.endsWith(' (m)') || lcLine.endsWith(' (f)')) {\n\t\t\t\tlcLine = lcLine.slice(0, -4);\n\t\t\t\tend -= 4;\n\t\t\t}\n\n\t\t\tif (lcLine.endsWith(')')) {\n\t\t\t\tconst parenIndex = lcLine.lastIndexOf(' (');\n\t\t\t\tif (parenIndex >= 0) {\n\t\t\t\t\tstart = start + parenIndex + 2;\n\t\t\t\t\tend--;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn [start, end];\n\t\t}\n\t\tcase 'item': {\n\t\t\t// let atIndex = lcLine.lastIndexOf('@');\n\t\t\t// if (atIndex < 0) return null;\n\n\t\t\t// if (lcLine.charAt(atIndex + 1) === ' ') atIndex++;\n\t\t\t// return { start: start + atIndex + 1, end };\n\t\t\tif (lcLine.startsWith(' ')) start++;\n\t\t\treturn [start, end];\n\t\t}\n\t\tcase 'ability': {\n\t\t\tif (lcLine.startsWith('[')) {\n\t\t\t\tstart++;\n\t\t\t\tif (lcLine.endsWith(' ')) {\n\t\t\t\t\tend--;\n\t\t\t\t\tlcLine = lcLine.slice(0, -1);\n\t\t\t\t}\n\t\t\t\tif (lcLine.endsWith(']')) {\n\t\t\t\t\tend--;\n\t\t\t\t}\n\t\t\t\treturn [start, end];\n\t\t\t}\n\t\t\tif (!lcLine.startsWith('ability:')) return null;\n\t\t\tstart += lcLine.startsWith('ability: ') ? 9 : 8;\n\t\t\treturn [start, end];\n\t\t}\n\t\tcase 'move': {\n\t\t\tif (!lcLine.startsWith('-')) return null;\n\t\t\tstart += lcLine.startsWith('- ') ? 2 : 1;\n\t\t\treturn [start, end];\n\t\t}\n\t\t}\n\t\treturn [start, end];\n\t}\n\tchangeSet(type: SelectionType, name: string, moveSlot?: string) {\n\t\tconst focus = this.innerFocus;\n\t\tif (!focus) return;\n\n\t\tif (type === focus.type && type !== 'pokemon') {\n\t\t\tthis.replace(name, focus.range[0], focus.range[1]);\n\t\t\tthis.updateText(false, true);\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (type) {\n\t\tcase 'pokemon': {\n\t\t\tconst set = this.editor.sets[focus.setIndex] ||= {\n\t\t\t\tspecies: '',\n\t\t\t\tmoves: [],\n\t\t\t};\n\t\t\tthis.editor.changeSpecies(set, name);\n\t\t\tthis.replaceSet(focus.setIndex);\n\t\t\tthis.updateText(false, true);\n\t\t\tbreak;\n\t\t}\n\t\tcase 'ability': {\n\t\t\tthis.editor.sets[focus.setIndex].ability = name;\n\t\t\tthis.replaceSet(focus.setIndex);\n\t\t\tthis.updateText(false, true);\n\t\t\tbreak;\n\t\t}\n\t\t}\n\t}\n\tgetSetRange(index: number) {\n\t\tif (!this.setInfo[index]) {\n\t\t\tif (this.innerFocus?.setIndex === index) {\n\t\t\t\treturn this.innerFocus.range;\n\t\t\t}\n\t\t\treturn [this.textbox.value.length, this.textbox.value.length];\n\t\t}\n\t\tconst start = this.setInfo[index].index;\n\t\tconst end = this.setInfo[index + 1].index;\n\t\treturn [start, end];\n\t}\n\tchangeCompat = (ev: Event) => {\n\t\tconst checkbox = ev.currentTarget as HTMLInputElement;\n\t\tthis.compat = checkbox.checked;\n\t\tthis.editor.import(this.textbox.value);\n\t\tthis.textbox.value = this.editor.export(this.compat);\n\t\t// this.textbox.select();\n\t\t// document.execCommand('insertText', false, this.editor.export(this.compat));\n\t\tthis.updateText();\n\t};\n\treplaceSet(index: number) {\n\t\tconst editor = this.editor;\n\t\tconst { team } = editor;\n\t\tif (!team) return;\n\n\t\tlet newText = Teams.exportSet(editor.sets[index], editor.dex, !this.compat);\n\t\tconst [start, end] = this.getSetRange(index);\n\t\tif (start && start === this.textbox.value.length && !this.textbox.value.endsWith('\\n\\n')) {\n\t\t\tnewText = (this.textbox.value.endsWith('\\n') ? '\\n' : '\\n\\n') + newText;\n\t\t}\n\t\tthis.replaceNoFocus(newText, start, end, start + newText.length);\n\t\t// we won't do a full update but we do need to update where the end is,\n\t\t// for future updates\n\t\tif (!this.setInfo[index]) {\n\t\t\tthis.updateText();\n\t\t\tthis.save();\n\t\t} else {\n\t\t\tif (this.setInfo[index + 1]) {\n\t\t\t\tthis.setInfo[index + 1].index = start + newText.length;\n\t\t\t}\n\t\t\t// others don't need to be updated;\n\t\t\t// we'll do a full update next time we focus the textbox\n\t\t\tthis.setDirty = true;\n\t\t}\n\t}\n\treplace(text: string, start: number, end: number, selectionStart = start, selectionEnd = start + text.length) {\n\t\tconst textbox = this.textbox;\n\t\t// const value = textbox.value;\n\t\t// textbox.value = value.slice(0, start) + text + value.slice(end);\n\t\ttextbox.focus();\n\t\ttextbox.setSelectionRange(start, end);\n\t\tdocument.execCommand('insertText', false, text);\n\t\t// textbox.setSelectionRange(selectionStart, selectionEnd);\n\t\tthis.save();\n\t}\n\treplaceNoFocus(text: string, start: number, end: number, selectionStart = start, selectionEnd = start + text.length) {\n\t\tconst textbox = this.textbox;\n\t\tconst value = textbox.value;\n\t\ttextbox.value = value.slice(0, start) + text + value.slice(end);\n\t\ttextbox.setSelectionRange(selectionStart, selectionEnd);\n\t\tthis.save();\n\t}\n\tsave() {\n\t\tthis.editor.import(this.textbox.value);\n\t\tthis.props.onChange?.();\n\t}\n\toverride componentDidMount() {\n\t\tthis.textbox = this.base!.getElementsByClassName('teamtextbox')[0] as HTMLTextAreaElement;\n\t\tthis.heightTester = this.base!.getElementsByClassName('heighttester')[0] as HTMLTextAreaElement;\n\n\t\tthis.editor = this.props.editor;\n\t\tconst exportedTeam = this.editor.export(this.compat);\n\t\tthis.textbox.value = exportedTeam;\n\t\tthis.updateText();\n\t\tsetTimeout(() => this.updateText());\n\t}\n\toverride componentWillUnmount() {\n\t\tthis.textbox = null!;\n\t\tthis.heightTester = null!;\n\t}\n\tclickDetails = (ev: Event) => {\n\t\tconst target = ev.currentTarget as HTMLButtonElement;\n\t\tconst i = parseInt(target.value || '0');\n\t\tif (this.innerFocus?.type === target.name) {\n\t\t\tthis.innerFocus = null;\n\t\t\tthis.forceUpdate();\n\t\t\treturn;\n\t\t}\n\t\tthis.engageFocus({\n\t\t\toffsetY: null,\n\t\t\tsetIndex: i,\n\t\t\ttype: target.name as SelectionType,\n\t\t\ttypeIndex: 0,\n\t\t\trange: [0, 0],\n\t\t\trangeEndChar: '',\n\t\t});\n\t};\n\taddPokemon = () => {\n\t\tif (this.textbox.value && !this.textbox.value.endsWith('\\n\\n')) {\n\t\t\tthis.textbox.value += this.textbox.value.endsWith('\\n') ? '\\n' : '\\n\\n';\n\t\t}\n\t\tconst end = this.textbox.value === '\\n\\n' ? 0 : this.textbox.value.length;\n\t\tthis.textbox.setSelectionRange(end, end);\n\t\tthis.textbox.focus();\n\t\tthis.engageFocus({\n\t\t\toffsetY: this.getYAt(end, true),\n\t\t\tsetIndex: this.setInfo.length,\n\t\t\ttype: 'pokemon',\n\t\t\ttypeIndex: 0,\n\t\t\trange: [end, end],\n\t\t\trangeEndChar: '@',\n\t\t});\n\t};\n\tscrollResults = (ev: Event) => {\n\t\tif (!(ev.currentTarget as HTMLElement).scrollTop) return;\n\t\tthis.windowing = false;\n\t\tif (document.documentElement.clientWidth === document.documentElement.scrollWidth) {\n\t\t\t(ev.currentTarget as any).scrollIntoViewIfNeeded?.();\n\t\t}\n\t\tthis.forceUpdate();\n\t};\n\tresetScroll() {\n\t\tthis.windowing = true;\n\t\tconst searchResults = this.base!.querySelector('.searchresults');\n\t\tif (searchResults) searchResults.scrollTop = 0;\n\t}\n\twindowResults() {\n\t\tif (this.windowing) {\n\t\t\treturn Math.ceil(window.innerHeight / 33);\n\t\t}\n\t\treturn null;\n\t}\n\n\trenderDetails(set: Dex.PokemonSet, i: number) {\n\t\tconst editor = this.editor;\n\t\tconst species = editor.dex.species.get(set.species);\n\n\t\tconst GenderChart = {\n\t\t\t'M': 'Male',\n\t\t\t'F': 'Female',\n\t\t\t'N': '\\u2014', // em dash\n\t\t};\n\t\tconst gender = GenderChart[(set.gender || species.gender || 'N') as 'N'];\n\n\t\treturn <button class=\"textbox setdetails\" name=\"details\" value={i} onClick={this.clickDetails}>\n\t\t\t<span class=\"detailcell\">\n\t\t\t\t<label>Level</label>{set.level || editor.defaultLevel}\n\t\t\t</span>\n\t\t\t<span class=\"detailcell\">\n\t\t\t\t<label>Shiny</label>{set.shiny ? 'Yes' : '\\u2014'}\n\t\t\t</span>\n\t\t\t{editor.gen === 9 ? (\n\t\t\t\t<span class=\"detailcell\">\n\t\t\t\t\t<label>Tera</label><PSIcon type={set.teraType || species.requiredTeraType || species.types[0]} />\n\t\t\t\t</span>\n\t\t\t) : editor.hpTypeMatters(set) ? (\n\t\t\t\t<span class=\"detailcell\">\n\t\t\t\t\t<label>H. Power</label><PSIcon type={editor.getHPType(set)} />\n\t\t\t\t</span>\n\t\t\t) : (\n\t\t\t\t<span class=\"detailcell\">\n\t\t\t\t\t<label>Gender</label>{gender}\n\t\t\t\t</span>\n\t\t\t)}\n\t\t</button>;\n\t}\n\n\trenderStats(set: Dex.PokemonSet, i: number) {\n\t\tconst editor = this.editor;\n\n\t\t// stat cell\n\t\treturn <button class=\"textbox setstats\" name=\"stats\" value={i} onClick={this.clickDetails}>\n\t\t\t{StatForm.renderStatGraph(set, editor)}\n\t\t</button>;\n\t}\n\thandleSetChange = () => {\n\t\tif (this.selection) {\n\t\t\tthis.replaceSet(this.selection.setIndex);\n\t\t\tthis.forceUpdate();\n\t\t}\n\t};\n\tbottomY() {\n\t\treturn this.setInfo[this.setInfo.length - 1]?.bottomY ?? 8;\n\t}\n\tcopyAll = (ev: Event) => {\n\t\tthis.textbox.select();\n\t\tdocument.execCommand('copy');\n\t\tconst button = ev?.currentTarget as HTMLButtonElement;\n\t\tif (button) {\n\t\t\tbutton.innerHTML = '<i class=\"fa fa-check\" aria-hidden=\"true\"></i> Copied';\n\t\t\tbutton.className += ' cur';\n\t\t}\n\t};\n\trender() {\n\t\tconst editor = this.props.editor;\n\t\tconst statsDetailsOffset = editor.gen >= 3 ? 18 : -1;\n\t\treturn <div>\n\t\t\t<p>\n\t\t\t\t<button class=\"button\" onClick={this.copyAll}>\n\t\t\t\t\t<i class=\"fa fa-copy\" aria-hidden></i> Copy\n\t\t\t\t</button> {}\n\t\t\t\t<label class=\"checkbox inline\">\n\t\t\t\t\t<input type=\"checkbox\" name=\"compat\" onChange={this.changeCompat} /> Old export format\n\t\t\t\t</label>\n\t\t\t</p>\n\t\t\t<div class=\"teameditor-text\">\n\t\t\t\t<textarea\n\t\t\t\t\tclass=\"textbox teamtextbox\" style={`padding-left:${editor.narrow ? '50px' : '100px'}`}\n\t\t\t\t\tonInput={this.input} onContextMenu={this.contextMenu} onKeyUp={this.keyUp} onKeyDown={this.keyDown}\n\t\t\t\t\tonClick={this.keyUp} onChange={this.maybeReplaceLine}\n\t\t\t\t\tplaceholder=\" Paste exported teams, pokepaste URLs, or JSON here\" readOnly={editor.readonly}\n\t\t\t\t/>\n\t\t\t\t<textarea\n\t\t\t\t\tclass=\"textbox teamtextbox heighttester\" tabIndex={-1} aria-hidden\n\t\t\t\t\tstyle={`padding-left:${editor.narrow ? '50px' : '100px'};visibility:hidden;left:-15px`}\n\t\t\t\t/>\n\t\t\t\t<div class=\"teamoverlays\">\n\t\t\t\t\t{this.setInfo.slice(0, -1).map(info =>\n\t\t\t\t\t\t<hr style={`top:${info.bottomY - 18}px;pointer-events:none`} />\n\t\t\t\t\t)}\n\t\t\t\t\t{editor.canAdd() && !!this.setInfo.length && <hr style={`top:${this.bottomY() - 18}px`} />}\n\t\t\t\t\t{this.setInfo.map((info, i) => {\n\t\t\t\t\t\tif (!info.species) return null;\n\t\t\t\t\t\tconst set = editor.sets[i];\n\t\t\t\t\t\tif (!set) return null;\n\t\t\t\t\t\tconst prevOffset = i === 0 ? 8 : this.setInfo[i - 1].bottomY;\n\t\t\t\t\t\tconst species = editor.dex.species.get(info.species);\n\t\t\t\t\t\tconst num = Dex.getPokemonIconNum(species.id);\n\t\t\t\t\t\tif (!num) return null;\n\n\t\t\t\t\t\tif (editor.narrow) {\n\t\t\t\t\t\t\treturn <div style={`top:${prevOffset + 1}px;left:5px;position:absolute;text-align:center;pointer-events:none`}>\n\t\t\t\t\t\t\t\t<div><PSIcon pokemon={species.id} /></div>\n\t\t\t\t\t\t\t\t{species.types.map(type => <div><PSIcon type={type} /></div>)}\n\t\t\t\t\t\t\t\t<div><PSIcon item={set.item || null} /></div>\n\t\t\t\t\t\t\t</div>;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn [<div\n\t\t\t\t\t\t\tstyle={\n\t\t\t\t\t\t\t\t`top:${prevOffset - 7}px;left:0;position:absolute;text-align:right;` +\n\t\t\t\t\t\t\t\t`width:94px;padding:103px 5px 0 0;min-height:24px;pointer-events:none;` +\n\t\t\t\t\t\t\t\tDex.getTeambuilderSprite(set, editor.dex)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div>{species.types.map(type => <PSIcon type={type} />)}<PSIcon item={set.item || null} /></div>\n\t\t\t\t\t\t</div>, <div style={`top:${prevOffset + statsDetailsOffset}px;right:9px;position:absolute`}>\n\t\t\t\t\t\t\t{this.renderStats(set, i)}\n\t\t\t\t\t\t</div>, <div style={`top:${prevOffset + statsDetailsOffset}px;right:145px;position:absolute`}>\n\t\t\t\t\t\t\t{this.renderDetails(set, i)}\n\t\t\t\t\t\t</div>];\n\t\t\t\t\t})}\n\t\t\t\t\t{editor.canAdd() && !(this.innerFocus && this.innerFocus.setIndex >= this.setInfo.length) && (\n\t\t\t\t\t\t<div style={`top:${this.bottomY() - 3}px;left:${editor.narrow ? 55 : 105}px;position:absolute`}>\n\t\t\t\t\t\t\t<button class=\"button\" onClick={this.addPokemon}>\n\t\t\t\t\t\t\t\t<i class=\"fa fa-plus\" aria-hidden></i> Add Pok&eacute;mon\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{this.innerFocus?.offsetY != null && (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass={`teaminnertextbox teaminnertextbox-${this.innerFocus.type}`}\n\t\t\t\t\t\t\tstyle={`top:${this.innerFocus.offsetY - 21}px;left:${editor.narrow ? 46 : 96}px;`}\n\t\t\t\t\t\t></div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t{this.innerFocus && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"searchresults\"\n\t\t\t\t\t\tstyle={`top:${(this.setInfo[this.innerFocus.setIndex]?.bottomY ?? this.bottomY() + 50) - 12}px`}\n\t\t\t\t\t\tonScroll={this.scrollResults}\n\t\t\t\t\t>\n\t\t\t\t\t\t<button class=\"button closesearch\" onClick={this.closeMenu}>\n\t\t\t\t\t\t\t{!editor.narrow && <kbd>Esc</kbd>} <i class=\"fa fa-times\" aria-hidden></i> Close\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t{this.innerFocus.type === 'stats' ? (\n\t\t\t\t\t\t\t<StatForm editor={editor} set={this.editor.sets[this.innerFocus.setIndex]} onChange={this.handleSetChange} />\n\t\t\t\t\t\t) : this.innerFocus.type === 'details' ? (\n\t\t\t\t\t\t\t<DetailsForm editor={editor} set={this.editor.sets[this.innerFocus.setIndex]} onChange={this.handleSetChange} />\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<PSSearchResults\n\t\t\t\t\t\t\t\tsearch={editor.search} resultIndex={editor.searchIndex}\n\t\t\t\t\t\t\t\twindowing={this.windowResults()} onSelect={this.selectResult}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>;\n\t}\n}\n\nclass TeamWizard extends preact.Component<{\n\teditor: TeamEditorState, onChange?: () => void, onUpdate: () => void,\n}> {\n\tsetSearchBox: string | null = null;\n\twindowing = true;\n\tsetFocus = (ev: Event) => {\n\t\tconst { editor } = this.props;\n\t\tif (editor.readonly) return;\n\t\tconst target = ev.currentTarget as HTMLButtonElement;\n\t\tconst [rawType, i] = (target.value || '').split('|');\n\t\tconst setIndex = parseInt(i);\n\t\tconst type = rawType as SelectionType;\n\t\tif (!target.value || editor.innerFocus && editor.innerFocus.setIndex === setIndex && editor.innerFocus.type === type) {\n\t\t\tthis.changeFocus(null);\n\t\t\treturn;\n\t\t}\n\t\tthis.changeFocus({\n\t\t\tsetIndex,\n\t\t\ttype,\n\t\t});\n\t};\n\tdeleteSet = (ev: Event) => {\n\t\tconst target = ev.currentTarget as HTMLButtonElement;\n\t\tconst i = parseInt(target.value);\n\t\tconst { editor } = this.props;\n\t\teditor.deleteSet(i);\n\t\tif (editor.innerFocus) {\n\t\t\tthis.changeFocus({\n\t\t\t\tsetIndex: editor.sets.length,\n\t\t\t\ttype: 'pokemon',\n\t\t\t});\n\t\t}\n\t\tthis.handleSetChange();\n\t\tev.preventDefault();\n\t};\n\tcopySet = (ev: Event) => {\n\t\tconst target = ev.currentTarget as HTMLButtonElement;\n\t\tconst i = parseInt(target.value);\n\t\tconst { editor } = this.props;\n\t\teditor.copySet(i);\n\t\teditor.innerFocus = null;\n\t\tthis.props.onUpdate();\n\t\twindow.PS?.update();\n\t\tev.preventDefault();\n\t};\n\tundeleteSet = (ev: Event) => {\n\t\tconst { editor } = this.props;\n\t\tconst setIndex = editor.deletedSet?.index;\n\t\teditor.undeleteSet();\n\t\tif (editor.innerFocus && setIndex !== undefined) {\n\t\t\tthis.changeFocus({\n\t\t\t\tsetIndex,\n\t\t\t\ttype: 'pokemon',\n\t\t\t});\n\t\t}\n\t\tthis.handleSetChange();\n\t\tev.preventDefault();\n\t};\n\tpasteSet = (ev: Event) => {\n\t\tconst target = ev.currentTarget as HTMLButtonElement;\n\t\tconst i = parseInt(target.value);\n\t\tconst { editor } = this.props;\n\t\teditor.pasteSet(i);\n\t\tthis.handleSetChange();\n\t\twindow.PS?.update();\n\t\tev.preventDefault();\n\t};\n\tmoveSet = (ev: Event) => {\n\t\tconst target = ev.currentTarget as HTMLButtonElement;\n\t\tconst i = parseInt(target.value);\n\t\tconst { editor } = this.props;\n\t\teditor.pasteSet(i, true);\n\t\tthis.handleSetChange();\n\t\tev.preventDefault();\n\t};\n\tchangeFocus(focus: TeamEditorState['innerFocus']) {\n\t\tconst { editor } = this.props;\n\t\teditor.innerFocus = focus;\n\t\tif (!focus) {\n\t\t\tthis.props.onUpdate();\n\t\t\treturn;\n\t\t}\n\n\t\tconst set = editor.sets[focus.setIndex];\n\t\tif (focus.type === 'details') {\n\t\t\tthis.setSearchBox = set.name || '';\n\t\t} else if (focus.type !== 'stats') {\n\t\t\tlet value;\n\t\t\tif (focus.type === 'pokemon') value = set?.species || '';\n\t\t\telse if (focus.type === 'item') value = set.item;\n\t\t\telse if (focus.type === 'ability') value = set.ability;\n\t\t\teditor.setSearchType(focus.type, focus.setIndex, value);\n\t\t\tthis.resetScroll();\n\t\t\tthis.setSearchBox = value || '';\n\t\t}\n\t\tthis.props.onUpdate();\n\t}\n\trenderSet(set: Dex.PokemonSet | undefined, i: number) {\n\t\tconst { editor } = this.props;\n\t\tconst sprite = Dex.getTeambuilderSprite(set, editor.dex);\n\t\tif (!set) {\n\t\t\treturn <div class=\"set-button\">\n\t\t\t\t<div style=\"text-align:right\">\n\t\t\t\t\t{editor.deletedSet ? (\n\t\t\t\t\t\t<button onClick={this.undeleteSet} class=\"option\"><i class=\"fa fa-undo\" aria-hidden></i> Undo delete</button>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<button class=\"option\" style=\"visibility:hidden\"><i class=\"fa fa-trash\" aria-hidden></i> Delete</button>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t<table>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td rowSpan={2} class=\"set-pokemon\"><div class=\"border-collapse\">\n\t\t\t\t\t\t\t<button class=\"button button-first cur\" onClick={this.setFocus} value={`pokemon|${i}`}>\n\t\t\t\t\t\t\t\t<span class=\"sprite\" style={sprite}><span class=\"sprite-inner\">\n\t\t\t\t\t\t\t\t\t<strong class=\"label\">Pokemon</strong> {}\n\t\t\t\t\t\t\t\t\t<em>(choose species)</em>\n\t\t\t\t\t\t\t\t</span></span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div></td>\n\t\t\t\t\t\t<td colSpan={2} class=\"set-details\"></td>\n\t\t\t\t\t\t<td rowSpan={2} class=\"set-moves\"></td>\n\t\t\t\t\t\t<td rowSpan={2} class=\"set-stats\"></td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class=\"set-ability\"></td>\n\t\t\t\t\t\t<td class=\"set-item\"></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t</div>;\n\t\t}\n\t\twhile (set.moves.length < 4) set.moves.push('');\n\t\tconst overfull = set.moves.length > 4 ? ' overfull' : '';\n\n\t\tconst cur = (t: SelectionType) => (\n\t\t\teditor.readonly || (editor.innerFocus?.type === t && editor.innerFocus.setIndex === i) ? ' cur' : ''\n\t\t);\n\t\tconst species = editor.dex.species.get(set.species);\n\t\tconst isCur = TeamEditorState.clipboard?.teams?.[editor.team.key]?.sets[i] ? ' cur' : '';\n\t\treturn <div class={`set-button${isCur}`}>\n\t\t\t<div style=\"text-align:right\">\n\t\t\t\t<button class=\"option\" onClick={this.copySet} value={i}>\n\t\t\t\t\t<i class=\"fa fa-copy\" aria-hidden></i> {\n\t\t\t\t\t\tisCur ? \"Remove from clipboard\" :\n\t\t\t\t\t\tTeamEditorState.clipboard ? \"Add to clipboard\" :\n\t\t\t\t\t\teditor.readonly ? \"Copy\" :\n\t\t\t\t\t\t\"Copy/Move\"\n\t\t\t\t\t}\n\t\t\t\t</button> {}\n\t\t\t\t{!(TeamEditorState.clipboard || editor.readonly) && <button class=\"option\" onClick={this.deleteSet} value={i}>\n\t\t\t\t\t<i class=\"fa fa-trash\" aria-hidden></i> Delete\n\t\t\t\t</button>}\n\t\t\t</div>\n\t\t\t<table>\n\t\t\t\t<tr>\n\t\t\t\t\t<td rowSpan={2} class=\"set-pokemon\"><div class=\"border-collapse\">\n\t\t\t\t\t\t<button class={`button button-first${cur('pokemon')}`} onClick={this.setFocus} value={`pokemon|${i}`}>\n\t\t\t\t\t\t\t<span class=\"sprite\" style={sprite}><span class=\"sprite-inner\">\n\t\t\t\t\t\t\t\t<strong class=\"label\">Pokemon</strong> {}\n\t\t\t\t\t\t\t\t{set.species}\n\t\t\t\t\t\t\t</span></span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div></td>\n\t\t\t\t\t<td colSpan={2} class=\"set-details\"><div class=\"border-collapse\">\n\t\t\t\t\t\t<button class={`button button-middle${cur('details')}`} onClick={this.setFocus} value={`details|${i}`}>\n\t\t\t\t\t\t\t<span class=\"detailcell\">\n\t\t\t\t\t\t\t\t<strong class=\"label\">Types</strong> {}\n\t\t\t\t\t\t\t\t{species.types.map(type => <div><PSIcon type={type} /></div>)}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span class=\"detailcell\">\n\t\t\t\t\t\t\t\t<strong class=\"label\">Level</strong> {}\n\t\t\t\t\t\t\t\t{set.level || editor.defaultLevel}\n\t\t\t\t\t\t\t\t{editor.narrow && set.shiny && <><br />\n\t\t\t\t\t\t\t\t\t<img src={`${Dex.resourcePrefix}sprites/misc/shiny.png`} width={22} height={22} alt=\"Shiny\" />\n\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t{!editor.narrow && set.gender && set.gender !== 'N' && <>\n\t\t\t\t\t\t\t\t\t<br /><img\n\t\t\t\t\t\t\t\t\t\tsrc={`${Dex.fxPrefix}gender-${set.gender.toLowerCase()}.png`} alt={set.gender} width=\"7\" height=\"10\" class=\"pixelated\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t{!!(!editor.narrow && (set.shiny || editor.gen >= 2)) && <span class=\"detailcell\">\n\t\t\t\t\t\t\t\t<strong class=\"label\">Shiny</strong> {}\n\t\t\t\t\t\t\t\t{set.shiny ? <img src={`${Dex.resourcePrefix}sprites/misc/shiny.png`} width={22} height={22} alt=\"Yes\" /> : '\\u2014'}\n\t\t\t\t\t\t\t</span>}\n\t\t\t\t\t\t\t{editor.gen === 9 && <span class=\"detailcell\">\n\t\t\t\t\t\t\t\t<strong class=\"label\">Tera</strong> {}\n\t\t\t\t\t\t\t\t<PSIcon type={set.teraType || species.requiredTeraType || species.types[0]} />\n\t\t\t\t\t\t\t</span>}\n\t\t\t\t\t\t\t{editor.hpTypeMatters(set) && <span class=\"detailcell\">\n\t\t\t\t\t\t\t\t<strong class=\"label\">H.P.</strong> {}\n\t\t\t\t\t\t\t\t<PSIcon type={editor.getHPType(set)} />\n\t\t\t\t\t\t\t</span>}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div></td>\n\t\t\t\t\t<td rowSpan={2} class=\"set-moves\"><div class=\"border-collapse\">\n\t\t\t\t\t\t<button class={`button button-middle${cur('move')}${overfull}`} onClick={this.setFocus} value={`move|${i}`}>\n\t\t\t\t\t\t\t<strong class=\"label\">Moves</strong> {}\n\t\t\t\t\t\t\t{set.moves.map((move, mi) => <div>\n\t\t\t\t\t\t\t\t{!editor.narrow && <small class=\"gray\">&bull;</small>}\n\t\t\t\t\t\t\t\t{mi >= 4 ? <span class=\"message-error\">{move || (editor.narrow && '-') || ''}</span> : move || (editor.narrow && '-')}\n\t\t\t\t\t\t\t</div>)}\n\t\t\t\t\t\t\t{!set.moves.length && <em>(no moves)</em>}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div></td>\n\t\t\t\t\t<td rowSpan={2} class=\"set-stats\"><div class=\"border-collapse\">\n\t\t\t\t\t\t<button class={`button button-last${cur('stats')}`} onClick={this.setFocus} value={`stats|${i}`}>\n\t\t\t\t\t\t\t{StatForm.renderStatGraph(set, this.props.editor, true)}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td class=\"set-ability\"><div class=\"border-collapse\">\n\t\t\t\t\t\t<button class={`button button-middle${cur('ability')}`} onClick={this.setFocus} value={`ability|${i}`}>\n\t\t\t\t\t\t\t{(editor.gen >= 3 || set.ability) && <>\n\t\t\t\t\t\t\t\t<strong class=\"label\">Ability</strong> {}\n\t\t\t\t\t\t\t\t{(set.ability !== 'No Ability' && set.ability) ||\n\t\t\t\t\t\t\t\t\t(!set.ability ? <em>(choose ability)</em> : <em>(no ability)</em>)}\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div></td>\n\t\t\t\t\t<td class=\"set-item\"><div class=\"border-collapse\">\n\t\t\t\t\t\t<button class={`button button-middle${cur('item')}`} onClick={this.setFocus} value={`item|${i}`}>\n\t\t\t\t\t\t\t{(editor.gen >= 2 || set.item) && <>\n\t\t\t\t\t\t\t\t{set.item && <PSIcon item={set.item} />}\n\t\t\t\t\t\t\t\t<strong class=\"label\">Item</strong> {}\n\t\t\t\t\t\t\t\t{set.item || <em>(no item)</em>}\n\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t\t<button class={`button set-nickname${cur('details')}`} onClick={this.setFocus} value={`details|${i}`}>\n\t\t\t\t<strong class=\"label\">Nickname</strong> {}\n\t\t\t\t{editor.getNickname(set)}\n\t\t\t</button>\n\t\t</div>;\n\t}\n\thandleSetChange = () => {\n\t\tthis.props.editor.save();\n\t\tthis.props.onChange?.();\n\t\tthis.forceUpdate();\n\t};\n\tclearSearchBox() {\n\t\tconst searchBox = this.base!.querySelector<HTMLInputElement>('input[name=value]');\n\t\tif (searchBox) {\n\t\t\tsearchBox.value = '';\n\t\t\tif (!TeamEditor.probablyMobile()) searchBox.focus();\n\t\t}\n\t}\n\tselectResult = (type: string | null, name: string, slot?: string, reverse?: boolean) => {\n\t\tconst { editor } = this.props;\n\t\tthis.clearSearchBox();\n\t\tif (type === null) {\n\t\t\tthis.resetScroll();\n\t\t\tthis.forceUpdate();\n\t\t} if (!type) {\n\t\t\teditor.setSearchValue('');\n\t\t\tthis.resetScroll();\n\t\t\tthis.forceUpdate();\n\t\t} else {\n\t\t\tconst setIndex = editor.innerFocus!.setIndex;\n\t\t\tconst set = (editor.sets[setIndex] ||= { species: '', moves: [] });\n\t\t\tswitch (type) {\n\t\t\tcase 'pokemon':\n\t\t\t\teditor.changeSpecies(set, name);\n\t\t\t\tthis.changeFocus({\n\t\t\t\t\tsetIndex,\n\t\t\t\t\ttype: reverse ? 'details' : 'ability',\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase 'ability':\n\t\t\t\tif (name === 'No Ability' && editor.gen <= 2) name = '';\n\t\t\t\tset.ability = name;\n\t\t\t\tthis.changeFocus({\n\t\t\t\t\tsetIndex,\n\t\t\t\t\ttype: reverse ? 'pokemon' : 'item',\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase 'item':\n\t\t\t\tset.item = name;\n\t\t\t\tthis.changeFocus({\n\t\t\t\t\tsetIndex,\n\t\t\t\t\ttype: reverse ? 'ability' : 'move',\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase 'move':\n\t\t\t\tif (slot) {\n\t\t\t\t\t// intentional; we're _removing_ from the slot\n\t\t\t\t\tconst i = parseInt(slot) - 1;\n\t\t\t\t\tif (set.moves[i]) {\n\t\t\t\t\t\tset.moves[i] = '';\n\t\t\t\t\t\t// remove empty slots at the end\n\t\t\t\t\t\tif (i === set.moves.length - 1) {\n\t\t\t\t\t\t\twhile (set.moves.length > 4 && !set.moves[set.moves.length - 1]) {\n\t\t\t\t\t\t\t\tset.moves.pop();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// if we have more than 4 moves, move the last move into the newly-cleared slot\n\t\t\t\t\t\tif (set.moves.length > 4 && i < set.moves.length - 1) {\n\t\t\t\t\t\t\tset.moves[i] = set.moves.pop()!;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if (set.moves.includes(name)) {\n\t\t\t\t\tset.moves.splice(set.moves.indexOf(name), 1);\n\t\t\t\t} else {\n\t\t\t\t\tfor (let i = 0; i < set.moves.length + 1; i++) {\n\t\t\t\t\t\tif (!set.moves[i]) {\n\t\t\t\t\t\t\tset.moves[i] = name;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (set.moves.length === 4 && set.moves.every(Boolean)) {\n\t\t\t\t\tthis.changeFocus({\n\t\t\t\t\t\tsetIndex,\n\t\t\t\t\t\ttype: reverse ? 'item' : 'stats',\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tif (editor.search.query) {\n\t\t\t\t\t\tthis.resetScroll();\n\t\t\t\t\t}\n\t\t\t\t\teditor.updateSearchMoves(set);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\teditor.save();\n\t\t\tthis.props.onChange?.();\n\t\t\tthis.forceUpdate();\n\t\t}\n\t};\n\tloadSampleSet = (setName: string) => {\n\t\tconst { editor } = this.props;\n\t\tconst setIndex = editor.innerFocus!.setIndex;\n\t\tconst set = editor.sets[setIndex];\n\t\tif (!set?.species) return;\n\n\t\tconst data = TeamEditorState.sampleSets?.[editor.format];\n\t\tconst sid = toID(set.species);\n\t\tconst setTemplate = data?.dex?.[set.species]?.[setName] ?? data?.dex?.[sid]?.[setName] ??\n\t\t\tdata?.stats?.[set.species]?.[setName] ?? data?.stats?.[sid]?.[setName];\n\t\tif (!setTemplate) return;\n\n\t\tconst applied: Partial<Dex.PokemonSet> = JSON.parse(JSON.stringify(setTemplate));\n\t\tObject.assign(set, applied);\n\n\t\teditor.save();\n\t\tthis.props.onUpdate?.();\n\t\tthis.forceUpdate();\n\t};\n\thandleLoadUserSet = (ev: Event) => {\n\t\tconst setName = (ev.target as HTMLButtonElement).value;\n\t\tthis.loadUserSet(setName);\n\t};\n\tloadUserSet = (setName: string) => {\n\t\tconst { editor } = this.props;\n\t\tconst setIndex = editor.innerFocus!.setIndex;\n\t\tconst set = editor.sets[setIndex];\n\t\tif (!set?.species) return;\n\n\t\tconst userSets = editor.getUserSets(set);\n\t\tconst setTemplate = userSets?.[setName];\n\t\tif (!setTemplate) return;\n\n\t\tconst applied: Partial<Dex.PokemonSet> = JSON.parse(JSON.stringify(setTemplate));\n\t\tdelete applied.name;\n\t\tObject.assign(set, applied);\n\n\t\teditor.save();\n\t\tthis.props.onUpdate?.();\n\t\tthis.forceUpdate();\n\t};\n\tupdateSearch = (ev: Event) => {\n\t\tconst searchBox = ev.currentTarget as HTMLInputElement;\n\t\tthis.props.editor.setSearchValue(searchBox.value);\n\t\tthis.resetScroll();\n\t\tthis.forceUpdate();\n\t};\n\thandleClickFilters = (ev: Event) => {\n\t\tconst search = this.props.editor.search;\n\t\tlet target = ev.target as HTMLElement | null;\n\t\twhile (target && target.className !== 'dexlist') {\n\t\t\tif (target.tagName === 'BUTTON') {\n\t\t\t\tconst filter = target.getAttribute('data-filter');\n\t\t\t\tif (filter) {\n\t\t\t\t\tsearch.removeFilter(filter.split(':') as any);\n\t\t\t\t\tconst searchBox = this.base!.querySelector<HTMLInputElement>('input[name=value]');\n\t\t\t\t\tsearch.find(searchBox?.value || '');\n\t\t\t\t\tif (!TeamEditor.probablyMobile()) searchBox?.select();\n\t\t\t\t\tthis.forceUpdate();\n\t\t\t\t\tev.preventDefault();\n\t\t\t\t\tev.stopPropagation();\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ttarget = target.parentElement;\n\t\t}\n\t};\n\tkeyDownSearch = (ev: KeyboardEvent) => {\n\t\tconst searchBox = ev.currentTarget as HTMLInputElement;\n\t\tconst { editor } = this.props;\n\t\tswitch (ev.keyCode) {\n\t\tcase 8: // backspace\n\t\t\tif (searchBox.selectionStart === 0 && searchBox.selectionEnd === 0) {\n\t\t\t\teditor.search.removeFilter();\n\t\t\t\teditor.setSearchValue(searchBox.value);\n\t\t\t\tthis.resetScroll();\n\t\t\t\tthis.forceUpdate();\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 38: // up\n\t\t\teditor.upSearchValue();\n\t\t\tconst resultsUp = this.base!.querySelector('.wizardsearchresults');\n\t\t\tif (resultsUp) {\n\t\t\t\tresultsUp.scrollTop = Math.max(0, editor.searchIndex * 33 - Math.trunc((window.innerHeight - 300) / 2));\n\t\t\t}\n\t\t\tthis.forceUpdate();\n\t\t\tev.preventDefault();\n\t\t\tbreak;\n\t\tcase 40: // down\n\t\t\teditor.downSearchValue();\n\t\t\tconst resultsDown = this.base!.querySelector('.wizardsearchresults');\n\t\t\tif (resultsDown) {\n\t\t\t\tresultsDown.scrollTop = Math.max(0, editor.searchIndex * 33 - Math.trunc((window.innerHeight - 300) / 2));\n\t\t\t}\n\t\t\tthis.forceUpdate();\n\t\t\tev.preventDefault();\n\t\t\tbreak;\n\t\tcase 37: // left\n\t\t\t// prevent jumping to other rooms\n\t\t\tev.stopImmediatePropagation();\n\t\t\tbreak;\n\t\tcase 39: // right\n\t\t\t// prevent jumping to other rooms\n\t\t\tev.stopImmediatePropagation();\n\t\t\tbreak;\n\t\tcase 13: // enter\n\t\tcase 9: // tab\n\t\t\tconst value = editor.selectSearchValue();\n\t\t\tif (editor.innerFocus?.type !== 'move') searchBox.value = value || '';\n\t\t\tif (value !== null) {\n\t\t\t\tif (ev.keyCode === 9 && editor.innerFocus?.type === 'move') {\n\t\t\t\t\tthis.changeFocus({\n\t\t\t\t\t\tsetIndex: editor.innerFocus.setIndex,\n\t\t\t\t\t\ttype: ev.shiftKey ? 'item' : 'stats',\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tconst [name, moveSlot] = value.split('|');\n\t\t\t\t\tthis.selectResult(editor.innerFocus?.type || '', name, moveSlot, ev.keyCode === 9 && ev.shiftKey);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.clearSearchBox();\n\t\t\t\teditor.setSearchValue('');\n\t\t\t\tthis.resetScroll();\n\t\t\t\tthis.forceUpdate();\n\t\t\t}\n\t\t\tev.preventDefault();\n\t\t\tbreak;\n\t\t}\n\t};\n\tscrollResults = (ev: Event) => {\n\t\tif (!(ev.currentTarget as HTMLElement).scrollTop) return;\n\t\tthis.windowing = false;\n\t\tif (document.documentElement.clientWidth === document.documentElement.scrollWidth) {\n\t\t\t(ev.currentTarget as any).scrollIntoViewIfNeeded?.();\n\t\t}\n\t\tthis.forceUpdate();\n\t};\n\tresetScroll() {\n\t\tthis.windowing = true;\n\t\tconst searchResults = this.base!.querySelector('.wizardsearchresults');\n\t\tif (searchResults) searchResults.scrollTop = 0;\n\t}\n\twindowResults() {\n\t\tif (this.windowing) {\n\t\t\treturn Math.ceil(window.innerHeight / 33);\n\t\t}\n\t\treturn null;\n\t}\n\n\toverride componentDidUpdate() {\n\t\tconst searchBox = this.base!.querySelector<HTMLInputElement>('input[name=value], input[name=nickname]');\n\t\tif (this.setSearchBox !== null) {\n\t\t\tif (searchBox) {\n\t\t\t\tsearchBox.value = this.setSearchBox;\n\t\t\t\tif (!TeamEditor.probablyMobile()) searchBox.select();\n\t\t\t}\n\t\t\tthis.setSearchBox = null;\n\t\t}\n\t\tconst filters = this.base!.querySelector('.dexlist-filters');\n\t\tif (searchBox && searchBox.name === 'value') {\n\t\t\tif (filters) {\n\t\t\t\tconst { width } = filters.getBoundingClientRect();\n\t\t\t\tsearchBox.style.paddingLeft = `${width + 5}px`;\n\t\t\t} else {\n\t\t\t\tsearchBox.style.paddingLeft = `3px`;\n\t\t\t}\n\t\t}\n\t}\n\trenderInnerFocus() {\n\t\tconst { editor } = this.props;\n\t\tif (!editor.innerFocus) return null;\n\t\tconst { type, setIndex } = editor.innerFocus;\n\t\tconst set = this.props.editor.sets[setIndex] as Dex.PokemonSet | undefined;\n\t\tconst cur = (i: number) => setIndex === i ? ' cur' : '';\n\t\tconst sampleSets = type === 'ability' ? editor.getSampleSets(set!) : [];\n\t\tconst userSets = type === 'ability' ? editor.getUserSets(set!) : null;\n\t\treturn <div class=\"team-focus-editor\">\n\t\t\t<ul class=\"tabbar\">\n\t\t\t\t<li class=\"home-li\"><button class=\"button\" onClick={this.setFocus}>\n\t\t\t\t\t<i class=\"fa fa-chevron-left\" aria-hidden></i> Back\n\t\t\t\t</button></li>\n\t\t\t\t{editor.sets.map((curSet, i) => <li><button\n\t\t\t\t\tclass={`button picontab${cur(i)}`} onClick={this.setFocus} value={`${type}|${i}`}\n\t\t\t\t>\n\t\t\t\t\t<PSIcon pokemon={curSet} /><br />\n\t\t\t\t\t{editor.getNickname(curSet)}\n\t\t\t\t</button></li>)}\n\t\t\t\t{editor.canAdd() && <li><button\n\t\t\t\t\tclass={`button picontab${cur(editor.sets.length)}`} onClick={this.setFocus} value={`pokemon|${editor.sets.length}`}\n\t\t\t\t>\n\t\t\t\t\t<i class=\"fa fa-plus\"></i>\n\t\t\t\t</button></li>}\n\t\t\t</ul>\n\t\t\t<div class=\"pad\" style=\"padding-top:0\">{this.renderSet(set, setIndex)}</div>\n\t\t\t{type === 'stats' ? (\n\t\t\t\t<StatForm editor={editor} set={set!} onChange={this.handleSetChange} />\n\t\t\t) : type === 'details' ? (\n\t\t\t\t<DetailsForm editor={editor} set={set!} onChange={this.handleSetChange} />\n\t\t\t) : (\n\t\t\t\t<div>\n\t\t\t\t\t<div class=\"searchboxwrapper pad\" onClick={this.handleClickFilters}>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"search\" name=\"value\" class=\"textbox\" placeholder=\"Search or filter\"\n\t\t\t\t\t\t\tonInput={this.updateSearch} onKeyDown={this.keyDownSearch} autocomplete=\"off\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{PSSearchResults.renderFilters(editor.search)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"wizardsearchresults\" onScroll={this.scrollResults}>\n\t\t\t\t\t\t<PSSearchResults\n\t\t\t\t\t\t\tsearch={editor.search} hideFilters resultIndex={editor.searchIndex}\n\t\t\t\t\t\t\tonSelect={this.selectResult} windowing={this.windowResults()}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{sampleSets?.length !== 0 && (\n\t\t\t\t\t\t\t<div class=\"sample-sets\">\n\t\t\t\t\t\t\t\t<h3>Sample sets</h3>\n\t\t\t\t\t\t\t\t{sampleSets ? (\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t{sampleSets.map(setName => <>\n\t\t\t\t\t\t\t\t\t\t\t<button class=\"button\" onClick={() => this.loadSampleSet(setName)}>\n\t\t\t\t\t\t\t\t\t\t\t\t{setName}\n\t\t\t\t\t\t\t\t\t\t\t</button> {}\n\t\t\t\t\t\t\t\t\t\t</>)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<div>Loading...</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{userSets !== null && (\n\t\t\t\t\t\t\t<div class=\"sample-sets\">\n\t\t\t\t\t\t\t\t<h3>Box sets</h3>\n\t\t\t\t\t\t\t\t{Object.keys(userSets).length > 0 ? (\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t{Object.keys(userSets).map(setName => <>\n\t\t\t\t\t\t\t\t\t\t\t<button class=\"button\" value={setName} onClick={this.handleLoadUserSet}>\n\t\t\t\t\t\t\t\t\t\t\t\t{setName}\n\t\t\t\t\t\t\t\t\t\t\t</button> {}\n\t\t\t\t\t\t\t\t\t\t</>)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<div>No {set!.species} sets found in boxes</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>;\n\t}\n\toverride render() {\n\t\tconst { editor } = this.props;\n\t\tif (editor.innerFocus) return this.renderInnerFocus();\n\t\tif (editor.fetching) {\n\t\t\treturn <div class=\"teameditor\">Fetching Paste...</div>;\n\t\t}\n\n\t\tconst clipboard = TeamEditorState.clipboard;\n\t\tconst willNotMove = (i: number) => (\n\t\t\tclipboard?.teams && !clipboard.otherSets && clipboard.teams[editor.team.key] &&\n\t\t\tObject.keys(clipboard.teams[editor.team.key]?.sets).length === 1 &&\n\t\t\t!!(clipboard.teams[editor.team.key]?.sets[i] || clipboard.teams[editor.team.key]?.sets[i - 1])\n\t\t);\n\t\tconst pasteControls = (i: number) => editor.readonly ? (\n\t\t\tnull\n\t\t) : clipboard ? <p>\n\t\t\t<button class=\"button notifying\" onClick={this.pasteSet} value={i}>\n\t\t\t\t<i class=\"fa fa-clipboard\" aria-hidden></i> Paste copy here\n\t\t\t</button> {}\n\t\t\t{!willNotMove(i) && <button class=\"button notifying\" onClick={this.moveSet} value={i} disabled={clipboard.readonly}>\n\t\t\t\t<i class=\"fa fa-arrow-right\" aria-hidden></i> Move here\n\t\t\t</button>}\n\t\t</p> : editor.deletedSet?.index === i ? <p style=\"text-align:right\">\n\t\t\t<button class=\"button\" onClick={this.undeleteSet}>\n\t\t\t\t<i class=\"fa fa-undo\" aria-hidden></i> Undo delete\n\t\t\t</button>\n\t\t</p> : null;\n\t\treturn <div class=\"teameditor\">\n\t\t\t{editor.sets.map((set, i) => [\n\t\t\t\tpasteControls(i),\n\t\t\t\tthis.renderSet(set, i),\n\t\t\t])}\n\t\t\t{pasteControls(editor.sets.length)}\n\t\t\t{editor.canAdd() && <p><button class=\"button big\" onClick={this.setFocus} value={`pokemon|${editor.sets.length}`}>\n\t\t\t\t<i class=\"fa fa-plus\" aria-hidden></i> Add Pok&eacute;mon\n\t\t\t</button></p>}\n\t\t</div>;\n\t}\n}\n\nclass StatForm extends preact.Component<{\n\teditor: TeamEditorState,\n\tset: Dex.PokemonSet,\n\tonChange: () => void,\n}> {\n\tstatic renderStatGraph(set: Dex.PokemonSet, editor: TeamEditorState, evs?: boolean) {\n\t\t// const supportsEVs = !team.format.includes('letsgo');\n\t\tconst defaultEV = (editor.gen > 2 ? 0 : 252);\n\t\tconst ivs = editor.getIVs(set);\n\t\treturn Dex.statNames.map(statID => {\n\t\t\tif (statID === 'spd' && editor.gen === 1) return null;\n\n\t\t\tconst stat = editor.getStat(statID, set, ivs[statID]);\n\t\t\tlet ev: number | string = set.evs?.[statID] ?? defaultEV;\n\t\t\tlet width = stat * 75 / 504;\n\t\t\tif (statID === 'hp') width = stat * 75 / 704;\n\t\t\tif (width > 75) width = 75;\n\t\t\tlet hue = Math.floor(stat * 180 / 714);\n\t\t\tif (hue > 360) hue = 360;\n\t\t\tconst statName = editor.gen === 1 && statID === 'spa' ? 'Spc' : BattleStatNames[statID];\n\t\t\tif (evs && !ev && !set.evs && statID === 'hp') ev = 'EVs';\n\t\t\treturn <span class=\"statrow\">\n\t\t\t\t<label>{statName}</label> {}\n\t\t\t\t<span class=\"statgraph\">\n\t\t\t\t\t<span style={`width:${width}px;background:hsl(${hue},40%,75%);border-color:hsl(${hue},40%,45%)`}></span>\n\t\t\t\t</span> {}\n\t\t\t\t{!evs && <em>{stat}</em>}\n\t\t\t\t{evs && <em>{ev || ''}</em>}\n\t\t\t\t{evs && (BattleNatures[set.nature!]?.plus === statID ? (\n\t\t\t\t\t<small>+</small>\n\t\t\t\t) : BattleNatures[set.nature!]?.minus === statID ? (\n\t\t\t\t\t<small>&minus;</small>\n\t\t\t\t) : null)}\n\t\t\t</span>;\n\t\t});\n\t}\n\trenderIVMenu() {\n\t\tconst { editor, set } = this.props;\n\t\tif (editor.gen <= 2) return null;\n\n\t\tconst hpType = editor.getHPMove(set);\n\t\tconst hpIVdata = hpType && !editor.canHyperTrain(set) && editor.getHPIVs(hpType) || null;\n\t\tconst autoSpread = set.ivs && editor.defaultIVs(set, false);\n\t\tconst autoSpreadValue = autoSpread && Object.values(autoSpread).join('/');\n\t\tif (!hpIVdata) {\n\t\t\treturn <select name=\"ivspread\" class=\"button\" onChange={this.changeIVSpread}>\n\t\t\t\t<option value=\"\" selected>IV spreads</option>\n\t\t\t\t{autoSpreadValue && <option value=\"auto\">Auto ({autoSpreadValue})</option>}\n\t\t\t\t<optgroup label=\"min Atk\">\n\t\t\t\t\t<option value=\"31/0/31/31/31/31\">31/0/31/31/31/31</option>\n\t\t\t\t</optgroup>\n\t\t\t\t<optgroup label=\"min Atk, min Spe\">\n\t\t\t\t\t<option value=\"31/0/31/31/31/0\">31/0/31/31/31/0</option>\n\t\t\t\t</optgroup>\n\t\t\t\t<optgroup label=\"max all\">\n\t\t\t\t\t<option value=\"31/31/31/31/31/31\">31/31/31/31/31/31</option>\n\t\t\t\t</optgroup>\n\t\t\t\t<optgroup label=\"min Spe\">\n\t\t\t\t\t<option value=\"31/31/31/31/31/0\">31/31/31/31/31/0</option>\n\t\t\t\t</optgroup>\n\t\t\t</select>;\n\t\t}\n\t\tconst minStat = editor.gen >= 6 ? 0 : 2;\n\t\tconst hpIVs = hpIVdata.map(ivs => ivs.split('').map(iv => parseInt(iv)));\n\n\t\treturn <select name=\"ivspread\" class=\"button\" onChange={this.changeIVSpread}>\n\t\t\t<option value=\"\" selected>Hidden Power {hpType} IVs</option>\n\t\t\t{autoSpreadValue && <option value=\"auto\">Auto ({autoSpreadValue})</option>}\n\t\t\t<optgroup label=\"min Atk\">\n\t\t\t\t{hpIVs.map(ivs => {\n\t\t\t\t\tconst spread = ivs.map((iv, i) => (i === 1 ? minStat : 30) + iv).join('/');\n\t\t\t\t\treturn <option value={spread}>{spread}</option>;\n\t\t\t\t})}\n\t\t\t</optgroup>\n\t\t\t<optgroup label=\"min Atk, min Spe\">\n\t\t\t\t{hpIVs.map(ivs => {\n\t\t\t\t\tconst spread = ivs.map((iv, i) => (i === 5 || i === 1 ? minStat : 30) + iv).join('/');\n\t\t\t\t\treturn <option value={spread}>{spread}</option>;\n\t\t\t\t})}\n\t\t\t</optgroup>\n\t\t\t<optgroup label=\"max all\">\n\t\t\t\t{hpIVs.map(ivs => {\n\t\t\t\t\tconst spread = ivs.map(iv => 30 + iv).join('/');\n\t\t\t\t\treturn <option value={spread}>{spread}</option>;\n\t\t\t\t})}\n\t\t\t</optgroup>\n\t\t\t<optgroup label=\"min Spe\">\n\t\t\t\t{hpIVs.map(ivs => {\n\t\t\t\t\tconst spread = ivs.map((iv, i) => (i === 5 ? minStat : 30) + iv).join('/');\n\t\t\t\t\treturn <option value={spread}>{spread}</option>;\n\t\t\t\t})}\n\t\t\t</optgroup>\n\t\t</select>;\n\t}\n\tsmogdexLink(s: string) {\n\t\tconst { editor } = this.props;\n\t\tconst species = editor.dex.species.get(s);\n\t\tlet format: string = editor.format;\n\t\tlet smogdexid: string = toID(species.baseSpecies);\n\n\t\tif (species.id === 'meowstic') {\n\t\t\tsmogdexid = 'meowstic-m';\n\t\t} else if (species.forme) {\n\t\t\tswitch (species.baseSpecies) {\n\t\t\tcase 'Alcremie':\n\t\t\tcase 'Basculin':\n\t\t\tcase 'Burmy':\n\t\t\tcase 'Castform':\n\t\t\tcase 'Cherrim':\n\t\t\tcase 'Deerling':\n\t\t\tcase 'Flabebe':\n\t\t\tcase 'Floette':\n\t\t\tcase 'Florges':\n\t\t\tcase 'Furfrou':\n\t\t\tcase 'Gastrodon':\n\t\t\tcase 'Genesect':\n\t\t\tcase 'Keldeo':\n\t\t\tcase 'Mimikyu':\n\t\t\tcase 'Minior':\n\t\t\tcase 'Pikachu':\n\t\t\tcase 'Polteageist':\n\t\t\tcase 'Sawsbuck':\n\t\t\tcase 'Shellos':\n\t\t\tcase 'Sinistea':\n\t\t\tcase 'Tatsugiri':\n\t\t\tcase 'Vivillon':\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tsmogdexid += '-' + toID(species.forme);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tlet generationNumber = 9;\n\t\tif (format.startsWith('gen')) {\n\t\t\tlet number = parseInt(format.charAt(3), 10);\n\t\t\tif (1 <= number && number <= 8) {\n\t\t\t\tgenerationNumber = number;\n\t\t\t}\n\t\t\tformat = format.slice(4);\n\t\t}\n\t\tconst generation = ['rb', 'gs', 'rs', 'dp', 'bw', 'xy', 'sm', 'ss', 'sv'][generationNumber - 1];\n\t\tif (format === 'battlespotdoubles') {\n\t\t\tsmogdexid += '/vgc15';\n\t\t} else if (format === 'doublesou' || format === 'doublesuu') {\n\t\t\tsmogdexid += '/doubles';\n\t\t} else if (\n\t\t\tformat === 'ou' || format === 'uu' || format === 'ru' || format === 'nu' || format === 'pu' ||\n\t\t\tformat === 'lc' || format === 'monotype' || format === 'mixandmega' || format === 'nfe' ||\n\t\t\tformat === 'nationaldex' || format === 'stabmons' || format === '1v1' || format === 'almostanyability'\n\t\t) {\n\t\t\tsmogdexid += '/' + format;\n\t\t} else if (format === 'balancedhackmons') {\n\t\t\tsmogdexid += '/bh';\n\t\t} else if (format === 'anythinggoes') {\n\t\t\tsmogdexid += '/ag';\n\t\t} else if (format === 'nationaldexag') {\n\t\t\tsmogdexid += '/national-dex-ag';\n\t\t}\n\t\treturn `http://smogon.com/dex/${generation}/pokemon/${smogdexid}/`;\n\t}\n\thandleGuess = () => {\n\t\tconst { editor, set } = this.props;\n\t\tconst team = editor.team;\n\n\t\tconst guess = new BattleStatGuesser(team.format).guess(set);\n\t\tset.evs = guess.evs;\n\t\tthis.plus = guess.plusStat || null;\n\t\tthis.minus = guess.minusStat || null;\n\t\tthis.updateNatureFromPlusMinus();\n\t\tthis.props.onChange();\n\t};\n\thandleOptimize = () => {\n\t\tconst { editor, set } = this.props;\n\t\tconst team = editor.team;\n\n\t\tconst optimized = BattleStatOptimizer(set, team.format);\n\t\tif (!optimized) return;\n\n\t\tset.evs = optimized.evs;\n\t\tthis.plus = optimized.plus || null;\n\t\tthis.minus = optimized.minus || null;\n\t\tthis.props.onChange();\n\t};\n\trenderSpreadGuesser() {\n\t\tconst { editor, set } = this.props;\n\t\tconst team = editor.team;\n\n\t\tif (editor.gen < 3) {\n\t\t\treturn <p>\n\t\t\t\t(<a target=\"_blank\" href={this.smogdexLink(set.species)}>Smogon&nbsp;analysis</a>)\n\t\t\t</p>;\n\t\t}\n\n\t\tconst guess = new BattleStatGuesser(team.format).guess(set);\n\t\tconst role = guess.role;\n\n\t\tconst guessedEVs = guess.evs;\n\t\tconst guessedPlus = guess.plusStat || null;\n\t\tconst guessedMinus = guess.minusStat || null;\n\t\treturn <p class=\"suggested\">\n\t\t\t<small>Guessed spread: </small>\n\t\t\t{role === '?' ? (\n\t\t\t\t\"(Please choose 4 moves to get a guessed spread)\"\n\t\t\t) : (\n\t\t\t\t<button name=\"setStatFormGuesses\" class=\"button\" onClick={this.handleGuess}>{role}: {}\n\t\t\t\t\t{\n\t\t\t\t\t\tDex.statNames.map(statID => guessedEVs[statID] ? `${guessedEVs[statID]} ${BattleStatNames[statID]}` : null)\n\t\t\t\t\t\t\t.filter(Boolean).join(' / ')\n\t\t\t\t\t}\n\t\t\t\t\t{!!(guessedPlus && guessedMinus) && (\n\t\t\t\t\t\t` (+${BattleStatNames[guessedPlus]}, -${BattleStatNames[guessedMinus]})`\n\t\t\t\t\t)}\n\t\t\t\t</button>\n\t\t\t)}\n\t\t\t<small> (<a target=\"_blank\" href={this.smogdexLink(set.species)}>Smogon&nbsp;analysis</a>)</small>\n\t\t\t{/* <small>\n\t\t\t\t({role} | bulk: phys {Math.round(guess.moveCount.physicalBulk / 1000)}\n\t\t\t\t{} + spec {Math.round(guess.moveCount.specialBulk / 1000)}\n\t\t\t\t{} = {Math.round(guess.moveCount.bulk / 1000)})\n\t\t\t</small> */}\n\t\t</p>;\n\t}\n\trenderStatOptimizer() {\n\t\tconst optimized = BattleStatOptimizer(this.props.set, this.props.editor.format);\n\t\tif (!optimized) return null;\n\n\t\treturn <p>\n\t\t\t<small><em>Protip:</em> Use a different nature to {\n\t\t\t\toptimized.savedEVs ?\n\t\t\t\t\t`save ${optimized.savedEVs} EVs` :\n\t\t\t\t\t'get higher stats'\n\t\t\t}: </small>\n\t\t\t<button name=\"setStatFormOptimization\" class=\"button\" onClick={this.handleOptimize}>\n\t\t\t\t{\n\t\t\t\t\tDex.statNames.map(statID => optimized.evs[statID] ? `${optimized.evs[statID]} ${BattleStatNames[statID]}` : null)\n\t\t\t\t\t\t.filter(Boolean).join(' / ')\n\t\t\t\t}\n\t\t\t\t{!!(optimized.plus && optimized.minus) && (\n\t\t\t\t\t` (+${BattleStatNames[optimized.plus]}, -${BattleStatNames[optimized.minus]})`\n\t\t\t\t)}\n\t\t\t</button>\n\t\t</p>;\n\t}\n\tsetInput(name: string, value: string) {\n\t\tconst evInput = this.base!.querySelector<HTMLInputElement>(`input[name=\"${name}\"]`);\n\t\tif (evInput) evInput.value = value;\n\t}\n\tupdate(init?: boolean) {\n\t\tconst { set } = this.props;\n\t\tconst nature = BattleNatures[set.nature!];\n\t\tconst skipID = !init ? this.base!.querySelector<HTMLInputElement>('input:focus')?.name : undefined;\n\t\tif (nature?.plus) {\n\t\t\tthis.plus = nature?.plus || null;\n\t\t\tthis.minus = nature?.minus || null;\n\t\t} else if (this.plus && this.minus) {\n\t\t\t// if only one of plus or minus is set, clearing Nature doesn't change them\n\t\t\tthis.plus = null;\n\t\t\tthis.minus = null;\n\t\t}\n\t\tfor (const statID of Dex.statNames) {\n\t\t\tconst ev = `${set.evs?.[statID] || ''}`;\n\t\t\tconst plusMinus = this.plus === statID ? '+' : this.minus === statID ? '-' : '';\n\t\t\tconst iv = this.ivToDv(set.ivs?.[statID]);\n\t\t\tif (skipID !== `ev-${statID}`) this.setInput(`ev-${statID}`, ev + plusMinus);\n\t\t\tif (skipID !== `iv-${statID}`) this.setInput(`iv-${statID}`, iv);\n\t\t}\n\t}\n\toverride componentDidMount(): void {\n\t\tthis.update(true);\n\t}\n\toverride componentDidUpdate(): void {\n\t\tthis.update();\n\t}\n\tplus: Dex.StatNameExceptHP | null = null;\n\tminus: Dex.StatNameExceptHP | null = null;\n\trenderStatbar(stat: number, statID: StatName) {\n\t\tlet width = stat * 180 / 504;\n\t\tif (statID === 'hp') width = Math.floor(stat * 180 / 704);\n\t\tif (width > 179) width = 179;\n\t\tlet hue = Math.floor(stat * 180 / 714);\n\t\tif (hue > 360) hue = 360;\n\t\treturn <span\n\t\t\tstyle={`width:${Math.floor(width)}px;background:hsl(${hue},85%,45%);border-color:hsl(${hue},85%,35%)`}\n\t\t></span>;\n\t}\n\tchangeEV = (ev: Event) => {\n\t\tconst target = ev.currentTarget as HTMLInputElement;\n\t\tconst { set } = this.props;\n\t\tconst statID = target.name.split('-')[1] as Dex.StatName;\n\t\tlet value = Math.abs(parseInt(target.value));\n\n\t\tif (isNaN(value)) {\n\t\t\tif (set.evs) delete set.evs[statID];\n\t\t} else {\n\t\t\tset.evs ||= {};\n\t\t\tset.evs[statID] = value;\n\t\t}\n\n\t\tif (target.type === 'range') {\n\t\t\t// enforce limit\n\t\t\tconst maxEv = this.maxEVs();\n\t\t\tif (maxEv < 6 * 252) {\n\t\t\t\tlet totalEv = 0;\n\t\t\t\tfor (const curEv of Object.values(set.evs || {})) totalEv += curEv;\n\t\t\t\tif (totalEv > maxEv && totalEv - value <= maxEv) {\n\t\t\t\t\tset.evs![statID] = maxEv - (totalEv - value) - (maxEv % 4);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (target.value.includes('+')) {\n\t\t\t\tif (statID === 'hp') {\n\t\t\t\t\talert(\"Natures cannot raise or lower HP.\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.plus = statID;\n\t\t\t} else if (this.plus === statID) {\n\t\t\t\tthis.plus = null;\n\t\t\t}\n\t\t\tif (target.value.includes('-')) {\n\t\t\t\tif (statID === 'hp') {\n\t\t\t\t\talert(\"Natures cannot raise or lower HP.\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.minus = statID;\n\t\t\t} else if (this.minus === statID) {\n\t\t\t\tthis.minus = null;\n\t\t\t}\n\t\t\tthis.updateNatureFromPlusMinus();\n\t\t}\n\n\t\tthis.props.onChange();\n\t};\n\tupdateNatureFromPlusMinus = () => {\n\t\tconst { set } = this.props;\n\t\tset.nature = Teams.getNatureFromPlusMinus(this.plus, this.minus) || undefined;\n\t};\n\t/** Converts DV/IV in a textbox to the value in set. */\n\tdvToIv(dvOrIvString?: string): number | null {\n\t\tconst dvOrIv = Number(dvOrIvString);\n\t\tif (isNaN(dvOrIv)) return null;\n\t\tconst useIVs = this.props.editor.gen > 2;\n\t\treturn useIVs ? dvOrIv : (dvOrIv === 15 ? 31 : dvOrIv * 2);\n\t}\n\t/** Converts set.iv value to a DV/IV for a text box. */\n\tivToDv(iv?: number | null): string {\n\t\tif (iv === null || iv === undefined) return '';\n\t\tconst useIVs = this.props.editor.gen > 2;\n\t\treturn `${useIVs ? iv : Math.trunc(iv / 2)}`;\n\t}\n\tchangeIV = (ev: Event) => {\n\t\tconst target = ev.currentTarget as HTMLInputElement;\n\t\tconst { set } = this.props;\n\t\tconst statID = target.name.split('-')[1] as StatName;\n\t\tconst value = this.dvToIv(target.value);\n\t\tif (value === null) {\n\t\t\tif (set.ivs) {\n\t\t\t\tdelete set.ivs[statID];\n\t\t\t\tif (Object.values(set.ivs).every(iv => iv === undefined)) {\n\t\t\t\t\tset.ivs = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tset.ivs ||= { hp: 31, atk: 31, def: 31, spa: 31, spd: 31, spe: 31 };\n\t\t\tset.ivs[statID] = value;\n\t\t}\n\t\tthis.props.onChange();\n\t};\n\tchangeNature = (ev: Event) => {\n\t\tconst target = ev.currentTarget as HTMLSelectElement;\n\t\tconst { set } = this.props;\n\t\tconst nature = target.value as Dex.NatureName;\n\t\tif (nature === 'Serious') {\n\t\t\tdelete set.nature;\n\t\t} else {\n\t\t\tset.nature = nature;\n\t\t}\n\t\tthis.props.onChange();\n\t};\n\tchangeIVSpread = (ev: Event) => {\n\t\tconst target = ev.currentTarget as HTMLSelectElement;\n\t\tconst { set } = this.props;\n\t\tif (!target.value) return;\n\n\t\tif (target.value === 'auto') {\n\t\t\tset.ivs = undefined;\n\t\t} else {\n\t\t\tconst [hp, atk, def, spa, spd, spe] = target.value.split('/').map(Number);\n\t\t\tset.ivs = { hp, atk, def, spa, spd, spe };\n\t\t}\n\t\tthis.props.onChange();\n\t};\n\tmaxEVs() {\n\t\tconst team = this.props.editor.team;\n\t\tconst useEVs = !team.format.includes('letsgo');\n\t\treturn useEVs ? 510 : Infinity;\n\t}\n\toverride render() {\n\t\tconst { editor, set } = this.props;\n\t\tconst team = editor.team;\n\t\tconst species = editor.dex.species.get(set.species);\n\n\t\tconst baseStats = species.baseStats;\n\n\t\tconst nature = BattleNatures[set.nature || 'Serious'];\n\n\t\tconst useEVs = !team.format.includes('letsgo');\n\t\t// const useAVs = !useEVs && team.format.endsWith('norestrictions');\n\t\tconst maxEV = useEVs ? 252 : 200;\n\t\tconst stepEV = useEVs ? 4 : 1;\n\t\tconst defaultEV = useEVs && editor.gen <= 2 && !set.evs ? maxEV : 0;\n\t\tconst useIVs = editor.gen > 2;\n\n\t\t// label column\n\t\tconst statNames = {\n\t\t\thp: 'HP',\n\t\t\tatk: 'Attack',\n\t\t\tdef: 'Defense',\n\t\t\tspa: 'Sp. Atk.',\n\t\t\tspd: 'Sp. Def.',\n\t\t\tspe: 'Speed',\n\t\t};\n\t\tif (editor.gen === 1) statNames.spa = 'Special';\n\n\t\tconst ivs = editor.getIVs(set);\n\t\tconst stats = Dex.statNames.filter(statID => editor.gen > 1 || statID !== 'spd').map(statID => [\n\t\t\tstatID, statNames[statID], editor.getStat(statID, set, ivs[statID]),\n\t\t] as const);\n\n\t\tlet remaining = null;\n\t\tconst maxEv = this.maxEVs();\n\t\tif (maxEv < 6 * 252) {\n\t\t\tlet totalEv = 0;\n\t\t\tfor (const ev of Object.values(set.evs || {})) totalEv += ev;\n\t\t\tif (totalEv <= maxEv) {\n\t\t\t\tremaining = (totalEv > (maxEv - 2) ? 0 : (maxEv - 2) - totalEv);\n\t\t\t} else {\n\t\t\t\tremaining = maxEv - totalEv;\n\t\t\t}\n\t\t\tremaining ||= null;\n\t\t}\n\t\tconst defaultIVs = editor.defaultIVs(set);\n\n\t\treturn <div style=\"font-size:10pt\" role=\"dialog\" aria-label=\"Stats\">\n\t\t\t<div class=\"resultheader\"><h3>EVs, IVs, and Nature</h3></div>\n\t\t\t<div class=\"pad\">\n\t\t\t\t{this.renderSpreadGuesser()}\n\t\t\t\t<table>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>{/* Stat name */}</th>\n\t\t\t\t\t\t<th>Base</th>\n\t\t\t\t\t\t<th class=\"setstatbar\">{/* Stat bar */}</th>\n\t\t\t\t\t\t<th>{useEVs ? 'EVs' : 'AVs'}</th>\n\t\t\t\t\t\t<th>{/* EV slider */}</th>\n\t\t\t\t\t\t<th>{useIVs ? 'IVs' : 'DVs'}</th>\n\t\t\t\t\t\t<th>{/* Final stat */}</th>\n\t\t\t\t\t</tr>\n\t\t\t\t\t{stats.map(([statID, statName, stat]) => <tr>\n\t\t\t\t\t\t<th style=\"text-align:right;font-weight:normal\">{statName}</th>\n\t\t\t\t\t\t<td style=\"text-align:right\"><strong>{baseStats[statID]}</strong></td>\n\t\t\t\t\t\t<td class=\"setstatbar\">{this.renderStatbar(stat, statID)}</td>\n\t\t\t\t\t\t<td><input\n\t\t\t\t\t\t\tname={`ev-${statID}`} placeholder={`${defaultEV || ''}`}\n\t\t\t\t\t\t\ttype=\"text\" inputMode=\"numeric\" class=\"textbox default-placeholder\" style=\"width:40px\"\n\t\t\t\t\t\t\tonInput={this.changeEV} onChange={this.changeEV}\n\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t<td><input\n\t\t\t\t\t\t\tname={`evslider-${statID}`} value={set.evs?.[statID] ?? defaultEV} min=\"0\" max={maxEV} step={stepEV}\n\t\t\t\t\t\t\ttype=\"range\" class=\"evslider\" tabIndex={-1} aria-hidden\n\t\t\t\t\t\t\tonInput={this.changeEV} onChange={this.changeEV}\n\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t<td><input\n\t\t\t\t\t\t\tname={`iv-${statID}`} min={0} max={useIVs ? 31 : 15} placeholder={`${defaultIVs[statID]}`} style=\"width:40px\"\n\t\t\t\t\t\t\ttype=\"number\" inputMode=\"numeric\" class=\"textbox default-placeholder\" onInput={this.changeIV} onChange={this.changeIV}\n\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t<td style=\"text-align:right\"><strong>{stat}</strong></td>\n\t\t\t\t\t</tr>)}\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td colSpan={2}></td>\n\t\t\t\t\t\t<td class=\"setstatbar\" style=\"text-align:right\">{remaining !== null ? 'Remaining:' : ''}</td>\n\t\t\t\t\t\t<td style=\"text-align:center\">{remaining && remaining < 0 ? <b class=\"message-error\">{remaining}</b> : remaining}</td>\n\t\t\t\t\t\t<td colSpan={3} style=\"text-align:right\">{this.renderIVMenu()}</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t\t{editor.gen >= 3 && <p>\n\t\t\t\t\tNature: <select name=\"nature\" class=\"button\" onChange={this.changeNature}>\n\t\t\t\t\t\t{Object.entries(BattleNatures).map(([natureName, curNature]) => (\n\t\t\t\t\t\t\t<option value={natureName} selected={curNature === nature}>\n\t\t\t\t\t\t\t\t{natureName}\n\t\t\t\t\t\t\t\t{curNature.plus && ` (+${BattleStatNames[curNature.plus]}, -${BattleStatNames[curNature.minus!]})`}\n\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</select>\n\t\t\t\t</p>}\n\t\t\t\t{editor.gen >= 3 && <p>\n\t\t\t\t\t<small><em>Protip:</em> You can also set natures by typing <kbd>+</kbd> and <kbd>-</kbd> in the EV box.</small>\n\t\t\t\t</p>}\n\t\t\t\t{editor.gen >= 3 && this.renderStatOptimizer()}\n\t\t\t</div>\n\t\t</div>;\n\t}\n}\n\nclass DetailsForm extends preact.Component<{\n\teditor: TeamEditorState,\n\tset: Dex.PokemonSet,\n\tonChange: () => void,\n}> {\n\tupdate(init?: boolean) {\n\t\tconst { set } = this.props;\n\t\tconst skipID = !init ? this.base!.querySelector<HTMLInputElement>('input:focus')?.name : undefined;\n\n\t\tconst nickname = this.base!.querySelector<HTMLInputElement>('input[name=\"nickname\"]');\n\t\tif (nickname && skipID !== 'nickname') nickname.value = set.name || '';\n\t}\n\toverride componentDidMount(): void {\n\t\tthis.update(true);\n\t}\n\toverride componentDidUpdate(): void {\n\t\tthis.update();\n\t}\n\tchangeNickname = (ev: Event) => {\n\t\tconst target = ev.currentTarget as HTMLInputElement;\n\t\tconst { set } = this.props;\n\t\tif (target.value) {\n\t\t\tset.name = target.value.trim();\n\t\t} else {\n\t\t\tdelete set.name;\n\t\t}\n\t\tthis.props.onChange();\n\t};\n\tchangeTera = (ev: Event) => {\n\t\tconst target = ev.currentTarget as HTMLInputElement;\n\t\tconst { editor, set } = this.props;\n\t\tconst species = editor.dex.species.get(set.species);\n\t\tif (!target.value || target.value === (species.requiredTeraType || species.types[0])) {\n\t\t\tdelete set.teraType;\n\t\t} else {\n\t\t\tset.teraType = target.value.trim();\n\t\t}\n\t\tthis.props.onChange();\n\t};\n\tchangeLevel = (ev: Event) => {\n\t\tconst target = ev.currentTarget as HTMLInputElement;\n\t\tconst { set } = this.props;\n\t\tif (target.value) {\n\t\t\tset.level = parseInt(target.value.trim());\n\t\t} else {\n\t\t\tdelete set.level;\n\t\t}\n\t\tthis.props.onChange();\n\t};\n\tchangeGender = (ev: Event) => {\n\t\tconst target = ev.currentTarget as HTMLInputElement;\n\t\tconst { set } = this.props;\n\t\tif (target.value) {\n\t\t\tset.gender = target.value.trim();\n\t\t} else {\n\t\t\tdelete set.gender;\n\t\t}\n\t\tthis.props.onChange();\n\t};\n\tchangeHappiness = (ev: Event) => {\n\t\tconst target = ev.currentTarget as HTMLInputElement;\n\t\tconst { set } = this.props;\n\t\tif (target.value) {\n\t\t\tset.happiness = parseInt(target.value.trim());\n\t\t} else {\n\t\t\tdelete set.happiness;\n\t\t}\n\t\tthis.props.onChange();\n\t};\n\tchangeShiny = (ev: Event) => {\n\t\tconst target = ev.currentTarget as HTMLInputElement;\n\t\tconst { set } = this.props;\n\t\tif (target.value) {\n\t\t\tset.shiny = true;\n\t\t} else {\n\t\t\tdelete set.shiny;\n\t\t}\n\t\tthis.props.onChange();\n\t};\n\tchangeDynamaxLevel = (ev: Event) => {\n\t\tconst target = ev.currentTarget as HTMLInputElement;\n\t\tconst { set } = this.props;\n\t\tif (target.value) {\n\t\t\tset.dynamaxLevel = parseInt(target.value.trim());\n\t\t} else {\n\t\t\tdelete set.dynamaxLevel;\n\t\t}\n\t\tthis.props.onChange();\n\t};\n\tchangeGigantamax = (ev: Event) => {\n\t\tconst target = ev.currentTarget as HTMLInputElement;\n\t\tconst { set } = this.props;\n\t\tif (target.checked) {\n\t\t\tset.gigantamax = true;\n\t\t} else {\n\t\t\tdelete set.gigantamax;\n\t\t}\n\t\tthis.props.onChange();\n\t};\n\tchangeHPType = (ev: Event) => {\n\t\tconst target = ev.currentTarget as HTMLInputElement;\n\t\tconst { set } = this.props;\n\t\tif (target.value) {\n\t\t\tset.hpType = target.value;\n\t\t} else {\n\t\t\tdelete set.hpType;\n\t\t}\n\t\tthis.props.onChange();\n\t};\n\trenderGender(gender: Dex.GenderName) {\n\t\tconst genderTable = { 'M': \"Male\", 'F': \"Female\" };\n\t\tif (gender === 'N') return 'Unknown';\n\t\treturn <>\n\t\t\t<img src={`${Dex.fxPrefix}gender-${gender.toLowerCase()}.png`} alt=\"\" width=\"7\" height=\"10\" class=\"pixelated\" /> {}\n\t\t\t{genderTable[gender]}\n\t\t</>;\n\t}\n\trender() {\n\t\tconst { editor, set } = this.props;\n\t\tconst species = editor.dex.species.get(set.species);\n\t\treturn <div style=\"font-size:10pt\" role=\"dialog\" aria-label=\"Details\">\n\t\t\t<div class=\"resultheader\"><h3>Details</h3></div>\n\t\t\t<div class=\"pad\">\n\t\t\t\t<p><label class=\"label\">Nickname: <input\n\t\t\t\t\tname=\"nickname\" class=\"textbox default-placeholder\" placeholder={species.baseSpecies}\n\t\t\t\t\tonInput={this.changeNickname} onChange={this.changeNickname}\n\t\t\t\t/></label></p>\n\t\t\t\t<p><label class=\"label\">Level: <input\n\t\t\t\t\tname=\"level\" value={set.level ?? ''} placeholder={`${editor.defaultLevel}`}\n\t\t\t\t\ttype=\"number\" inputMode=\"numeric\" min=\"1\" max=\"100\" step=\"1\"\n\t\t\t\t\tclass=\"textbox inputform numform default-placeholder\" style=\"width: 50px\"\n\t\t\t\t\tonInput={this.changeLevel} onChange={this.changeLevel}\n\t\t\t\t/></label><small>(You probably want to change the team's levels by changing the format, not here)</small></p>\n\t\t\t\t{editor.gen > 1 && (<>\n\t\t\t\t\t<p><div class=\"label\">Shiny: <div class=\"labeled\">\n\t\t\t\t\t\t<label class=\"checkbox inline\"><input\n\t\t\t\t\t\t\ttype=\"radio\" name=\"shiny\" value=\"true\" checked={set.shiny}\n\t\t\t\t\t\t\tonInput={this.changeShiny} onChange={this.changeShiny}\n\t\t\t\t\t\t/> <img src={`${Dex.resourcePrefix}sprites/misc/shiny.png`} width={22} height={22} alt=\"Shiny\" /> Yes</label>\n\t\t\t\t\t\t<label class=\"checkbox inline\"><input\n\t\t\t\t\t\t\ttype=\"radio\" name=\"shiny\" value=\"\" checked={!set.shiny}\n\t\t\t\t\t\t\tonInput={this.changeShiny} onChange={this.changeShiny}\n\t\t\t\t\t\t/> No</label>\n\t\t\t\t\t</div></div></p>\n\t\t\t\t\t<p><div class=\"label\">Gender: {species.gender ? (\n\t\t\t\t\t\t<strong>{this.renderGender(species.gender)}</strong>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div class=\"labeled\">\n\t\t\t\t\t\t\t<label class=\"checkbox inline\"><input\n\t\t\t\t\t\t\t\ttype=\"radio\" name=\"gender\" value=\"M\" checked={set.gender === 'M'}\n\t\t\t\t\t\t\t\tonInput={this.changeGender} onChange={this.changeGender}\n\t\t\t\t\t\t\t/> {this.renderGender('M')}</label>\n\t\t\t\t\t\t\t<label class=\"checkbox inline\"><input\n\t\t\t\t\t\t\t\ttype=\"radio\" name=\"gender\" value=\"F\" checked={set.gender === 'F'}\n\t\t\t\t\t\t\t\tonInput={this.changeGender} onChange={this.changeGender}\n\t\t\t\t\t\t\t/> {this.renderGender('F')}</label>\n\t\t\t\t\t\t\t<label class=\"checkbox inline\"><input\n\t\t\t\t\t\t\t\ttype=\"radio\" name=\"gender\" value=\"\" checked={!set.gender || set.gender === 'N'}\n\t\t\t\t\t\t\t\tonInput={this.changeGender} onChange={this.changeGender}\n\t\t\t\t\t\t\t/> Random</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}</div></p>\n\t\t\t\t\t{editor.isLetsGo ? (\n\t\t\t\t\t\t<p><label class=\"label\">Happiness: <input\n\t\t\t\t\t\t\tname=\"happiness\" value=\"\" placeholder=\"70\"\n\t\t\t\t\t\t\ttype=\"number\" inputMode=\"numeric\"\n\t\t\t\t\t\t\tclass=\"textbox inputform numform default-placeholder\" style=\"width: 50px\"\n\t\t\t\t\t\t\tonInput={this.changeHappiness} onChange={this.changeHappiness}\n\t\t\t\t\t\t/></label></p>\n\t\t\t\t\t) : (editor.gen < 8 || editor.isNatDex) && (\n\t\t\t\t\t\t<p><label class=\"label\">Happiness: <input\n\t\t\t\t\t\t\tname=\"happiness\" value={set.happiness ?? ''} placeholder=\"255\"\n\t\t\t\t\t\t\ttype=\"number\" inputMode=\"numeric\" min=\"0\" max=\"255\" step=\"1\"\n\t\t\t\t\t\t\tclass=\"textbox inputform numform default-placeholder\" style=\"width: 50px\"\n\t\t\t\t\t\t\tonInput={this.changeHappiness} onChange={this.changeHappiness}\n\t\t\t\t\t\t/></label></p>\n\t\t\t\t\t)}\n\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t\t{editor.gen === 8 && !editor.isBDSP && !species.cannotDynamax && (\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<label class=\"label\" style=\"display:inline\">Dynamax Level: <input\n\t\t\t\t\t\t\tname=\"dynamaxlevel\" value={set.dynamaxLevel ?? ''} placeholder=\"10\"\n\t\t\t\t\t\t\ttype=\"number\" inputMode=\"numeric\" min=\"0\" max=\"10\" step=\"1\" class=\"textbox inputform numform default-placeholder\"\n\t\t\t\t\t\t\tonInput={this.changeDynamaxLevel} onChange={this.changeDynamaxLevel}\n\t\t\t\t\t\t/></label> {}\n\t\t\t\t\t\t{species.canGigantamax ? (\n\t\t\t\t\t\t\t<label class=\"checkbox inline\"><input\n\t\t\t\t\t\t\t\ttype=\"checkbox\" name=\"gigantamax\" value=\"true\" checked={set.gigantamax}\n\t\t\t\t\t\t\t\tonInput={this.changeGigantamax} onChange={this.changeGigantamax}\n\t\t\t\t\t\t\t/> Gigantamax</label>\n\t\t\t\t\t\t) : species.forme === 'Gmax' && (\n\t\t\t\t\t\t\t<label class=\"checkbox inline\"><input\n\t\t\t\t\t\t\t\ttype=\"checkbox\" checked disabled\n\t\t\t\t\t\t\t/> Gigantamax</label>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</p>\n\t\t\t\t)}\n\t\t\t\t{((!editor.isLetsGo && editor.gen === 7) || editor.isNatDex || species.baseSpecies === 'Unown') && <p>\n\t\t\t\t\t<label class=\"label\">Hidden Power Type: <select name=\"hptype\" class=\"button\" onChange={this.changeHPType}>\n\t\t\t\t\t\t{Dex.types.all().map(type => (\n\t\t\t\t\t\t\ttype.HPivs && <option value={type.name} selected={editor.getHPType(set) === type.name}>\n\t\t\t\t\t\t\t\t{type.name}\n\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</select></label>\n\t\t\t\t</p>}\n\t\t\t\t{editor.gen === 9 && <p>\n\t\t\t\t\t<label class=\"label\" title=\"Tera Type\">\n\t\t\t\t\t\tTera Type: {}\n\t\t\t\t\t\t{species.requiredTeraType && editor.formeLegality === 'normal' ? (\n\t\t\t\t\t\t\t<select name=\"teratype\" class=\"button cur\" disabled><option>{species.requiredTeraType}</option></select>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<select name=\"teratype\" class=\"button\" onChange={this.changeTera}>\n\t\t\t\t\t\t\t\t{Dex.types.all().map(type => (\n\t\t\t\t\t\t\t\t\t<option value={type.name} selected={(set.teraType || species.requiredTeraType || species.types[0]) === type.name}>\n\t\t\t\t\t\t\t\t\t\t{type.name}\n\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</label>\n\t\t\t\t</p>}\n\t\t\t\t{species.cosmeticFormes && <div>\n\t\t\t\t\t<p><strong>Form:</strong></p>\n\t\t\t\t\t<div style=\"display:flex;flex-wrap:wrap;gap:6px;max-width:400px;\">\n\t\t\t\t\t\t{(() => {\n\t\t\t\t\t\t\tconst baseId = toID(species.baseSpecies);\n\t\t\t\t\t\t\tconst forms = species.cosmeticFormes?.length ? [baseId, ...species.cosmeticFormes.map(toID)] : [baseId];\n\t\t\t\t\t\t\treturn forms.map(id => {\n\t\t\t\t\t\t\t\tconst sp = editor.dex.species.get(id);\n\t\t\t\t\t\t\t\tconst isCur = toID(set.species) === id;\n\t\t\t\t\t\t\t\treturn <button\n\t\t\t\t\t\t\t\t\tvalue={id} class={`button piconbtn${isCur ? ' cur' : ''}`}\n\t\t\t\t\t\t\t\t\tstyle={{ padding: '2px' }} onClick={this.selectSprite}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<PSIcon pokemon={{ species: sp.name } as Dex.PokemonSet} />\n\t\t\t\t\t\t\t\t\t<br />{sp.forme || sp.baseForme || sp.baseSpecies}\n\t\t\t\t\t\t\t\t</button>;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t})()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>}\n\t\t\t</div>\n\t\t</div>;\n\t}\n\n\tselectSprite = (ev: Event) => {\n\t\tconst target = ev.currentTarget as HTMLButtonElement;\n\t\tconst formId = target.value;\n\t\tconst { editor, set } = this.props;\n\t\tconst species = editor.dex.species.get(formId);\n\t\tif (!species.exists) return;\n\t\teditor.changeSpecies(set, species.name);\n\t\tthis.props.onChange();\n\t\tthis.forceUpdate();\n\t};\n}\n"],"mappings":"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","ignoreList":[]}