{"version":3,"file":"replays-battle.js","names":["showAd","id","window","top","__vm_add","success","document","readyState","addEventListener","placement","createElement","setAttribute","innerWidth","querySelector","appendChild","push","BattleDiv","_preact$Component","apply","arguments","_inheritsLoose","_proto","prototype","shouldComponentUpdate","render","preact","h","style","position","Component","BattleLogDiv","_preact$Component2","_proto2","BattlePanel","_preact$Component3","_this","_len","length","args","Array","_key","call","concat","result","undefined","resultError","battle","lastUsedKeyCode","turnView","autofocusTurnView","keyPressed","e","_e$target","_e$target2","_this$battle","_this$battle2","keyCode","ctrlKey","metaKey","altKey","closeTurn","target","tagName","atQueueEnd","replay","paused","play","pause","shiftKey","firstTurn","prevTurn","lastTurn","nextTurn","stepSpeed","alert","String","fromCharCode","preventDefault","forceUpdate","toggleMute","_this$battle3","_this$battle4","_this$battle5","reset","_this$battle6","_this$battle7","seekBy","_this$battle8","_this$battle9","seekTurn","_this$battle10","Infinity","goToTurn","_this$base","_this$battle11","turn","base","value","trim","turnNum","Number","isNaN","switchViewpoint","_this$battle12","_this$battle13","viewpointSwitched","PSRouter","replace","stripQuery","props","clickDownload","_this$result","filename","tier","timestamp","uploadtime","date","Date","getFullYear","getMonth","getDate","toID","p1","name","p2","a","currentTarget","href","BattleLog","createReplayFileHref","download","stopPropagation","changeSpeed","speed","fadeTable","hyperfast","fast","normal","slow","reallyslow","delayTable","messageShownTime","messageFadeTime","scene","updateAcceleration","changeSound","_this$battle14","muted","setMute","BattleSound","setBgmVolume","changeVolume","_this$battle15","_this$battle16","volume","setEffectVolume","changeDarkMode","darkmode","PSReplays","darkMode","updateDarkMode","openTurn","_this$battle17","_proto3","componentDidMount","loadBattle","onkeydown","componentWillReceiveProps","nextProps","includes","slice","indexOf","_this2","destroy","elem","getElementById","logElem","setTimeout","loadResult","innerText","Net","get","then","err","statusCode","body","_this3","log","JSON","parse","$base","$","Battle","$frame","find","$logFrame","split","isReplay","autoresize","subscribe","_","query","decodeQuery","t","parseInt","startsWith","toString","componentWillUnmount","_this$battle18","componentDidUpdate","_this$base2","select","_this$base3","turnbox","setSelectionRange","focus","getSpeed","delta","_this$base4","values","newValue","_this$battle19","renderError","showingLeft","maxWidth","textAlign","src","alt","imageRendering","renderControls","_this$battle20","_this$battle21","_this$result2","_this$result3","atEnd","atStart","started","onSubmit","autofocus","inputMode","size","type","onClick","width","marginRight","disabled","marginLeft","zIndex","onChange","bgmVolume","players","onInput","format","join","toDateString","rating","leftLoc","stickyRight","bottom"],"sources":["../src/replays-battle.tsx"],"sourcesContent":["/** @jsx preact.h */\nimport preact from '../../play.pokemonshowdown.com/js/lib/preact';\nimport $ from 'jquery';\nimport { Net } from './utils';\nimport { PSRouter, PSReplays } from './replays';\nimport { Battle } from '../../play.pokemonshowdown.com/src/battle';\nimport { BattleLog } from '../../play.pokemonshowdown.com/src/battle-log';\nimport { BattleSound } from '../../play.pokemonshowdown.com/src/battle-sound';\nimport type { ID } from '../../play.pokemonshowdown.com/src/battle-dex';\ndeclare function toID(input: string): string;\n\nfunction showAd(id: string) {\n\t// @ts-expect-error no clue how to declare this one\n\twindow.top.__vm_add = window.top.__vm_add || [];\n\n\t// this is a x-browser way to make sure content has loaded.\n\n\t(success => {\n\t\tif (window.document.readyState !== \"loading\") {\n\t\t\tsuccess();\n\t\t} else {\n\t\t\twindow.document.addEventListener(\"DOMContentLoaded\", () => {\n\t\t\t\tsuccess();\n\t\t\t});\n\t\t}\n\t})(() => {\n\t\tconst placement = document.createElement(\"div\");\n\t\tplacement.setAttribute(\"class\", \"vm-placement\");\n\t\tif (window.innerWidth > 1000) {\n\t\t\t// load desktop placement\n\t\t\tplacement.setAttribute(\"data-id\", \"6452680c0b35755a3f09b59b\");\n\t\t} else {\n\t\t\t// load mobile placement\n\t\t\tplacement.setAttribute(\"data-id\", \"645268557bc7b571c2f06f62\");\n\t\t}\n\t\tdocument.querySelector(\"#\" + id)!.appendChild(placement);\n\t\t// @ts-expect-error no clue how to declare this one\n\t\twindow.top.__vm_add.push(placement);\n\t});\n}\n\nexport class BattleDiv extends preact.Component {\n\toverride shouldComponentUpdate() {\n\t\treturn false;\n\t}\n\toverride render() {\n\t\treturn <div class=\"battle\" style={{ position: 'relative' }}></div>;\n\t}\n}\nclass BattleLogDiv extends preact.Component {\n\toverride shouldComponentUpdate() {\n\t\treturn false;\n\t}\n\toverride render() {\n\t\treturn <div class=\"battle-log\"></div>;\n\t}\n}\n\nexport class BattlePanel extends preact.Component<{ id: string }> {\n\tresult: {\n\t\tuploadtime: number,\n\t\tid: string,\n\t\tformat: string,\n\t\tplayers: string[],\n\t\tlog: string,\n\t\tviews: number,\n\t\trating: number,\n\t\tprivate: number,\n\t\tpassword: string,\n\t} | null | undefined = undefined;\n\tresultError = '';\n\tbattle!: Battle | null;\n\t/** debug purposes */\n\tlastUsedKeyCode = '0';\n\tturnView: boolean | string = false;\n\tautofocusTurnView: 'select' | 'end' | null = null;\n\toverride componentDidMount() {\n\t\tthis.loadBattle(this.props.id);\n\t\tshowAd('LeaderboardBTF');\n\t\twindow.onkeydown = this.keyPressed;\n\t}\n\toverride componentWillReceiveProps(nextProps: this['props']) {\n\t\tif (this.stripQuery(this.props.id) !== this.stripQuery(nextProps.id)) {\n\t\t\tthis.loadBattle(nextProps.id);\n\t\t}\n\t}\n\tstripQuery(id: string) {\n\t\treturn id.includes('?') ? id.slice(0, id.indexOf('?')) : id;\n\t}\n\tloadBattle(id: string) {\n\t\tif (this.battle) this.battle.destroy();\n\t\tthis.battle = null;\n\t\tthis.result = undefined;\n\t\tthis.resultError = '';\n\t\tthis.forceUpdate();\n\n\t\tconst elem = document.getElementById(`replaydata-${id}`);\n\t\tconst logElem = document.getElementById(`replaylog-${id}`);\n\t\tif (elem) {\n\t\t\t// we actually do need to wait for that update to finish so\n\t\t\t// loadResult definitely has access to $frame and $logFrame\n\t\t\tsetTimeout(() => this.loadResult(elem.innerText, id, logElem?.innerText.replace(/<\\\\\\//g, '</')), 1);\n\t\t\treturn;\n\t\t}\n\n\t\tNet(`/${this.stripQuery(id)}.json`).get().then(result => {\n\t\t\tthis.loadResult(result, id);\n\t\t}).catch(err => {\n\t\t\tthis.loadResult(err.statusCode === 404 ? '' : String(err?.body || ''), id);\n\t\t});\n\t}\n\tloadResult(result: string, id: string, log = '') {\n\t\ttry {\n\t\t\tconst replay: NonNullable<BattlePanel['result']> = JSON.parse(result);\n\t\t\treplay.log ||= log;\n\t\t\tthis.result = replay;\n\t\t\tconst $base = $(this.base!);\n\t\t\tthis.battle = new Battle({\n\t\t\t\tid: replay.id as ID,\n\t\t\t\t$frame: $base.find('.battle'),\n\t\t\t\t$logFrame: $base.find('.battle-log'),\n\t\t\t\tlog: replay.log.split('\\n'),\n\t\t\t\tisReplay: true,\n\t\t\t\tpaused: true,\n\t\t\t\tautoresize: true,\n\t\t\t});\n\t\t\t// for ease of debugging\n\t\t\t(window as any).battle = this.battle;\n\t\t\tthis.battle.subscribe(_ => {\n\t\t\t\tthis.forceUpdate();\n\t\t\t});\n\t\t\tconst query = Net.decodeQuery(id);\n\t\t\tif ('p2' in query) {\n\t\t\t\tthis.battle.switchViewpoint();\n\t\t\t}\n\t\t\tif (query.turn || query.t) {\n\t\t\t\tthis.battle.seekTurn(parseInt(query.turn || query.t, 10));\n\t\t\t}\n\t\t} catch (err: any) {\n\t\t\tthis.result = null;\n\t\t\tthis.resultError = result.startsWith('{') ? err.toString() : result;\n\t\t}\n\t\tthis.forceUpdate();\n\t}\n\toverride componentWillUnmount(): void {\n\t\tthis.battle?.destroy();\n\t\t(window as any).battle = null;\n\t\twindow.onkeydown = null;\n\t}\n\toverride componentDidUpdate(): void {\n\t\tif (this.autofocusTurnView === 'select') {\n\t\t\tthis.base?.querySelector<HTMLInputElement>('input[name=turn]')?.select();\n\t\t\tthis.autofocusTurnView = null;\n\t\t}\n\t\tif (this.autofocusTurnView === 'end') {\n\t\t\tconst turnbox = this.base?.querySelector<HTMLInputElement>('input[name=turn]');\n\t\t\tturnbox?.setSelectionRange(2, 2);\n\t\t\tturnbox?.focus();\n\t\t\tthis.autofocusTurnView = null;\n\t\t}\n\t}\n\tkeyPressed = (e: KeyboardEvent) => {\n\t\tthis.lastUsedKeyCode = `${e.keyCode}`;\n\t\tif (e.ctrlKey || e.metaKey || e.altKey) return;\n\t\tif (e.keyCode === 27 && this.turnView) { // Esc\n\t\t\tthis.closeTurn();\n\t\t\treturn;\n\t\t}\n\t\t// @ts-expect-error really wish they let me assert that the target is an HTMLElement\n\t\tif (e.target?.tagName === 'INPUT' || e.target?.tagName === 'SELECT') return;\n\t\tswitch (e.keyCode) {\n\t\tcase 75: // k\n\t\t\tif (this.battle?.atQueueEnd) {\n\t\t\t\tthis.replay();\n\t\t\t} else if (this.battle?.paused) {\n\t\t\t\tthis.play();\n\t\t\t} else {\n\t\t\t\tthis.pause();\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 74: // j\n\t\t\tif (e.shiftKey) this.firstTurn();\n\t\t\telse this.prevTurn();\n\t\t\tbreak;\n\t\tcase 76: // l\n\t\t\tif (e.shiftKey) this.lastTurn();\n\t\t\telse this.nextTurn();\n\t\t\tbreak;\n\t\tcase 188: // , (<)\n\t\t\tif (e.shiftKey) this.stepSpeed(-1);\n\t\t\tbreak;\n\t\tcase 190: // . (>)\n\t\t\tif (e.shiftKey) this.stepSpeed(1);\n\t\t\tbreak;\n\t\tcase 191: // / (?)\n\t\t\tif (e.shiftKey) {\n\t\t\t\talert(\n\t\t\t\t\t'k = play/pause\\n' +\n\t\t\t\t\t'j = previous turn\\n' +\n\t\t\t\t\t'l = next turn\\n' +\n\t\t\t\t\t'J = first turn\\n' +\n\t\t\t\t\t'L = last turn\\n' +\n\t\t\t\t\t'm = mute\\n' +\n\t\t\t\t\t'< = slower\\n' +\n\t\t\t\t\t'> = faster\\n' +\n\t\t\t\t\t'1-9 = skip to turn\\n' +\n\t\t\t\t\t'? = keyboard shortcuts (this)\\n'\n\t\t\t\t);\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 48: case 49: case 50: case 51: case 52: case 53: case 54: case 55: case 56: case 57: // 0-9\n\t\tcase 96: case 97: case 98: case 99: case 100: case 101: case 102: case 103: case 104: case 105: // numpad 0-9\n\t\t\tthis.turnView = String.fromCharCode(e.keyCode - (e.keyCode >= 96 ? 48 : 0));\n\t\t\tif (this.turnView === '0') this.turnView = '10';\n\t\t\tthis.autofocusTurnView = 'end';\n\t\t\te.preventDefault();\n\t\t\tthis.forceUpdate();\n\t\t\tbreak;\n\t\tcase 77: // m\n\t\t\tthis.toggleMute();\n\t\t\tbreak;\n\t\t}\n\t\tthis.forceUpdate();\n\t};\n\tplay = () => {\n\t\tthis.battle?.play();\n\t};\n\treplay = () => {\n\t\tthis.battle?.reset();\n\t\tthis.battle?.play();\n\t\tthis.forceUpdate();\n\t};\n\tpause = () => {\n\t\tthis.battle?.pause();\n\t};\n\tnextTurn = () => {\n\t\tthis.battle?.seekBy(1);\n\t};\n\tprevTurn = () => {\n\t\tthis.battle?.seekBy(-1);\n\t};\n\tfirstTurn = () => {\n\t\tthis.battle?.seekTurn(0);\n\t};\n\tlastTurn = () => {\n\t\tthis.battle?.seekTurn(Infinity);\n\t};\n\tgoToTurn = (e: Event) => {\n\t\tconst turn = this.base?.querySelector<HTMLInputElement>('input[name=turn]')?.value;\n\t\tif (!turn?.trim()) return this.closeTurn(e);\n\t\tlet turnNum = Number(turn);\n\t\tif (turn === 'e' || turn === 'end' || turn === 'f' || turn === 'finish') turnNum = Infinity;\n\t\tif (isNaN(turnNum) || turnNum < 0) alert(\"Invalid turn\");\n\t\tthis.battle?.seekTurn(turnNum);\n\t\tthis.closeTurn(e);\n\t};\n\tswitchViewpoint = () => {\n\t\tthis.battle?.switchViewpoint();\n\t\tif (this.battle?.viewpointSwitched) {\n\t\t\tPSRouter.replace(this.stripQuery(this.props.id) + '?p2');\n\t\t} else {\n\t\t\tPSRouter.replace(this.stripQuery(this.props.id));\n\t\t}\n\t};\n\tclickDownload = (e: MouseEvent) => {\n\t\tif (!this.battle) {\n\t\t\t// should never happen\n\t\t\talert(\"Wait for the battle to finish loading before downloading.\");\n\t\t\treturn;\n\t\t}\n\t\tlet filename = (this.battle.tier || 'Battle').replace(/[^A-Za-z0-9]/g, '');\n\n\t\t// ladies and gentlemen, JavaScript dates\n\t\tconst timestamp = (this.result?.uploadtime || 0) * 1000;\n\t\tconst date = new Date(timestamp);\n\t\tfilename += `-${date.getFullYear()}`;\n\t\tfilename += `${date.getMonth() >= 9 ? '-' : '-0'}${date.getMonth() + 1}`;\n\t\tfilename += `${date.getDate() >= 10 ? '-' : '-0'}${date.getDate()}`;\n\n\t\tfilename += '-' + toID(this.battle.p1.name);\n\t\tfilename += '-' + toID(this.battle.p2.name);\n\n\t\tconst a = e.currentTarget as HTMLAnchorElement;\n\t\ta.href = BattleLog.createReplayFileHref({ battle: this.battle });\n\t\ta.download = filename + '.html';\n\n\t\te.stopPropagation();\n\t};\n\tgetSpeed() {\n\t\tif (!this.battle) return 'normal';\n\t\tif (this.battle.messageFadeTime <= 40) {\n\t\t\treturn 'hyperfast';\n\t\t} else if (this.battle.messageFadeTime <= 50) {\n\t\t\treturn 'fast';\n\t\t} else if (this.battle.messageFadeTime >= 500) {\n\t\t\treturn 'slow';\n\t\t} else if (this.battle.messageFadeTime >= 1000) {\n\t\t\treturn 'reallyslow';\n\t\t}\n\t\treturn 'normal';\n\t}\n\tchangeSpeed = (e: Event | { target: HTMLSelectElement }) => {\n\t\tconst speed = (e.target as HTMLSelectElement).value;\n\t\tconst fadeTable = {\n\t\t\thyperfast: 40,\n\t\t\tfast: 50,\n\t\t\tnormal: 300,\n\t\t\tslow: 500,\n\t\t\treallyslow: 1000,\n\t\t};\n\t\tconst delayTable = {\n\t\t\thyperfast: 1,\n\t\t\tfast: 1,\n\t\t\tnormal: 1,\n\t\t\tslow: 1000,\n\t\t\treallyslow: 3000,\n\t\t};\n\t\tif (!this.battle) return;\n\t\tthis.battle.messageShownTime = delayTable[speed as 'fast'];\n\t\tthis.battle.messageFadeTime = fadeTable[speed as 'fast'];\n\t\tthis.battle.scene.updateAcceleration();\n\t};\n\tstepSpeed(delta: number) {\n\t\tconst target = this.base?.querySelector<HTMLSelectElement>('select[name=speed]');\n\t\tif (!target) return; // should never happen\n\t\tconst values = ['reallyslow', 'slow', 'normal', 'fast', 'hyperfast'];\n\t\tconst newValue = values[values.indexOf(target.value) + delta];\n\t\tif (newValue) {\n\t\t\ttarget.value = newValue;\n\t\t\tthis.changeSpeed({ target });\n\t\t}\n\t}\n\ttoggleMute() {\n\t\tthis.battle?.setMute(!BattleSound.muted);\n\t\tthis.forceUpdate();\n\t}\n\tchangeSound = (e: Event) => {\n\t\tconst muted = (e.target as HTMLSelectElement).value;\n\t\tthis.battle?.setMute(muted === 'off');\n\t\t// Wolfram Alpha says that default volume is 100 e^(-(2 log^2(2))/log(10)) which is around 65.881\n\t\tBattleSound.setBgmVolume(muted === 'musicoff' ? 0 : 65.88125800126558);\n\t\tthis.forceUpdate();\n\t};\n\tchangeVolume = (e: Event) => {\n\t\tconst volume = Number((e.target as HTMLSelectElement).value);\n\t\tBattleSound.setBgmVolume(volume);\n\t\tBattleSound.setEffectVolume(volume);\n\t\tthis.battle?.setMute(true);\n\t\tthis.battle?.setMute(false);\n\t\tthis.forceUpdate();\n\t};\n\tchangeDarkMode = (e: Event) => {\n\t\tconst darkmode = (e.target as HTMLSelectElement).value as 'dark';\n\t\tPSReplays.darkMode = darkmode;\n\t\tPSReplays.updateDarkMode();\n\t\tthis.forceUpdate();\n\t};\n\topenTurn = (e: Event) => {\n\t\tthis.turnView = `${this.battle?.turn || ''}` || true;\n\t\tthis.autofocusTurnView = 'select';\n\t\te.preventDefault();\n\t\tthis.forceUpdate();\n\t};\n\tcloseTurn = (e?: Event) => {\n\t\tthis.turnView = false;\n\t\te?.preventDefault();\n\t\tthis.forceUpdate();\n\t};\n\trenderError(position: any) {\n\t\tif (this.resultError) {\n\t\t\treturn <div class={PSRouter.showingLeft() ? 'mainbar has-sidebar' : 'mainbar'} style={position}>\n\t\t\t\t<section class=\"section\">\n\t\t\t\t\t<h1>Error</h1>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t{this.resultError}\n\t\t\t\t\t</p>\n\t\t\t\t</section>\n\t\t\t</div>;\n\t\t}\n\n\t\t// In theory, this should almost never happen, because Replays will\n\t\t// never link to a nonexistent replay, but this might happen if e.g.\n\t\t// a replay gets deleted or made private after you searched for it\n\t\t// but before you clicked it.\n\t\treturn <div class={PSRouter.showingLeft() ? 'mainbar has-sidebar' : 'mainbar'} style={position}>\n\t\t\t<section class=\"section\" style={{ maxWidth: '200px' }}>\n\t\t\t\t<div style={{ textAlign: 'center' }}>\n\t\t\t\t\t<img src=\"//play.pokemonshowdown.com/sprites/gen5ani/unown-n.gif\" alt=\"\" style={{ imageRendering: 'pixelated' }} />\n\t\t\t\t\t<img src=\"//play.pokemonshowdown.com/sprites/gen5ani/unown-o.gif\" alt=\"\" style={{ imageRendering: 'pixelated' }} />\n\t\t\t\t\t<img src=\"//play.pokemonshowdown.com/sprites/gen5ani/unown-t.gif\" alt=\"\" style={{ imageRendering: 'pixelated' }} />\n\t\t\t\t</div>\n\t\t\t\t<div style={{ textAlign: 'center' }}>\n\t\t\t\t\t<img src=\"//play.pokemonshowdown.com/sprites/gen5ani/unown-f.gif\" alt=\"\" style={{ imageRendering: 'pixelated' }} />\n\t\t\t\t\t<img src=\"//play.pokemonshowdown.com/sprites/gen5ani/unown-o.gif\" alt=\"\" style={{ imageRendering: 'pixelated' }} />\n\t\t\t\t\t<img src=\"//play.pokemonshowdown.com/sprites/gen5ani/unown-u.gif\" alt=\"\" style={{ imageRendering: 'pixelated' }} />\n\t\t\t\t\t<img src=\"//play.pokemonshowdown.com/sprites/gen5ani/unown-n.gif\" alt=\"\" style={{ imageRendering: 'pixelated' }} />\n\t\t\t\t\t<img src=\"//play.pokemonshowdown.com/sprites/gen5ani/unown-d.gif\" alt=\"\" style={{ imageRendering: 'pixelated' }} />\n\t\t\t\t</div>\n\t\t\t</section><section class=\"section\">\n\t\t\t\t<h1>Not Found</h1>\n\t\t\t\t<p>\n\t\t\t\t\tThe battle you're looking for has expired. Battles expire after 15 minutes of inactivity unless they're saved.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\tIn the future, remember to click <strong>Upload and share replay</strong> to save a replay permanently.\n\t\t\t\t</p>\n\t\t\t</section>\n\t\t</div>;\n\t}\n\trenderControls() {\n\t\tconst atEnd = !this.battle || this.battle.atQueueEnd;\n\t\tconst atStart = !this.battle?.started;\n\n\t\tif (this.turnView) {\n\t\t\tconst value = this.turnView === true ? undefined : this.turnView;\n\t\t\tthis.turnView = true;\n\t\t\treturn <div class=\"replay-controls\"><section class=\"section\">\n\t\t\t\t<form onSubmit={this.goToTurn}>\n\t\t\t\t\tTurn? <input name=\"turn\" autofocus value={value} inputMode=\"numeric\" class=\"textbox\" size={5} /> {}\n\t\t\t\t\t<button type=\"submit\" class=\"button\"><strong>Go</strong></button> {}\n\t\t\t\t\t<button type=\"button\" class=\"button\" onClick={this.closeTurn}>Cancel</button>\n\t\t\t\t</form>\n\t\t\t\t<p>\n\t\t\t\t\t<em>Pro tip:</em> You don't need to click \"Skip to turn\" if you have a keyboard, just start typing\n\t\t\t\t\tthe turn number and press <kbd>Enter</kbd>. For more shortcuts, press <kbd>Shift</kbd>+<kbd>/</kbd> {}\n\t\t\t\t\twhen a text box isn't focused.\n\t\t\t\t</p>\n\t\t\t</section></div>;\n\t\t}\n\n\t\treturn <div class=\"replay-controls\">\n\t\t\t<p>\n\t\t\t\t{atEnd && this.battle ? (\n\t\t\t\t\t<button onClick={this.replay} class=\"button\" style={{ width: '5em', marginRight: '3px' }}>\n\t\t\t\t\t\t<i class=\"fa fa-undo\" aria-hidden></i><br />Replay\n\t\t\t\t\t</button>\n\t\t\t\t) : !this.battle || this.battle.paused ? (\n\t\t\t\t\t<button onClick={this.play} class=\"button\" disabled={!this.battle} style={{ width: '5em', marginRight: '3px' }}>\n\t\t\t\t\t\t<i class=\"fa fa-play\" aria-hidden></i><br /><strong>Play</strong>\n\t\t\t\t\t</button>\n\t\t\t\t) : (\n\t\t\t\t\t<button onClick={this.pause} class=\"button\" style={{ width: '5em', marginRight: '3px' }}>\n\t\t\t\t\t\t<i class=\"fa fa-pause\" aria-hidden></i><br /><strong>Pause</strong>\n\t\t\t\t\t</button>\n\t\t\t\t)} {}\n\t\t\t\t<button class=\"button button-first\" disabled={atStart} onClick={this.firstTurn}>\n\t\t\t\t\t<i class=\"fa fa-fast-backward\" aria-hidden></i><br />First turn\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tclass=\"button button-first\" disabled={atStart} style={{ marginLeft: '1px', position: 'relative', zIndex: '1' }}\n\t\t\t\t\tonClick={this.prevTurn}\n\t\t\t\t>\n\t\t\t\t\t<i class=\"fa fa-step-backward\" aria-hidden></i><br />Prev turn\n\t\t\t\t</button>\n\t\t\t\t<button class=\"button button-last\" disabled={atEnd} style={{ marginRight: '2px' }} onClick={this.nextTurn}>\n\t\t\t\t\t<i class=\"fa fa-step-forward\" aria-hidden></i><br />Skip turn\n\t\t\t\t</button>\n\t\t\t\t<button class=\"button button-last\" disabled={atEnd} onClick={this.lastTurn}>\n\t\t\t\t\t<i class=\"fa fa-fast-forward\" aria-hidden></i><br />Skip to end\n\t\t\t\t</button> {}\n\t\t\t\t<button class=\"button\" onClick={this.openTurn}>\n\t\t\t\t\t<i class=\"fa fa-repeat\" aria-hidden></i> Go to turn...\n\t\t\t\t</button>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<label class=\"optgroup\">\n\t\t\t\t\tSpeed:<br />\n\t\t\t\t\t<select name=\"speed\" class=\"button\" onChange={this.changeSpeed} value={this.getSpeed()}>\n\t\t\t\t\t\t<option value=\"hyperfast\">Hyperfast</option>\n\t\t\t\t\t\t<option value=\"fast\">Fast</option>\n\t\t\t\t\t\t<option value=\"normal\">Normal</option>\n\t\t\t\t\t\t<option value=\"slow\">Slow</option>\n\t\t\t\t\t\t<option value=\"reallyslow\">Really slow</option>\n\t\t\t\t\t</select>\n\t\t\t\t</label> {}\n\t\t\t\t<label class=\"optgroup\">\n\t\t\t\t\tSound:<br />\n\t\t\t\t\t<select\n\t\t\t\t\t\tname=\"sound\" class=\"button\" onChange={this.changeSound}\n\t\t\t\t\t\tvalue={BattleSound.muted ? 'off' : BattleSound.bgmVolume ? 'on' : 'musicoff'}\n\t\t\t\t\t>\n\t\t\t\t\t\t<option value=\"on\">On</option>\n\t\t\t\t\t\t<option value=\"musicoff\">Music Off</option>\n\t\t\t\t\t\t<option value=\"off\">Muted</option>\n\t\t\t\t\t</select>\n\t\t\t\t</label> {}\n\t\t\t\t<label class=\"optgroup\">\n\t\t\t\t\tDark mode:<br />\n\t\t\t\t\t<select name=\"darkmode\" class=\"button\" onChange={this.changeDarkMode} value={PSReplays.darkMode}>\n\t\t\t\t\t\t<option value=\"auto\">Automatic</option>\n\t\t\t\t\t\t<option value=\"dark\">Dark</option>\n\t\t\t\t\t\t<option value=\"light\">Light</option>\n\t\t\t\t\t</select>\n\t\t\t\t</label> {}\n\t\t\t\t<label class=\"optgroup\">\n\t\t\t\t\tViewpoint:<br />\n\t\t\t\t\t<button onClick={this.switchViewpoint} name=\"viewpoint\" class={this.battle ? 'button' : 'button disabled'}>\n\t\t\t\t\t\t{(this.battle?.viewpointSwitched ? this.result?.players[1] : this.result?.players[0] || \"Player\")} {}\n\t\t\t\t\t\t<i class=\"fa fa-random\" aria-hidden aria-label=\"Switch viewpoint\"></i>\n\t\t\t\t\t</button>\n\t\t\t\t</label> {}\n\t\t\t\t<label class=\"optgroup\">\n\t\t\t\t\tVolume:<br />\n\t\t\t\t\t<input type=\"range\" onInput={this.changeVolume} />\n\t\t\t\t</label>\n\t\t\t</p>\n\t\t\t{this.result ? <h1>\n\t\t\t\t<strong>{this.result.format}</strong>: {this.result.players.join(' vs. ')}\n\t\t\t</h1> : <h1>\n\t\t\t\t<em>Loading...</em>\n\t\t\t</h1>}\n\t\t\t{this.result ? <p>\n\t\t\t\t<a class=\"button\" href=\"/download\" onClick={this.clickDownload} style={{ float: 'right' }}>\n\t\t\t\t\t<i class=\"fa fa-download\" aria-hidden></i> Download\n\t\t\t\t</a>\n\t\t\t\t{this.result.uploadtime ? new Date(this.result.uploadtime * 1000).toDateString() : \"Unknown upload date\"}\n\t\t\t\t{this.result.rating ? [` | `, <em>Rating:</em>, ` ${this.result.rating}`] : ''}\n\t\t\t\t{/* {} <code>{this.keyCode}</code> */}\n\t\t\t</p> : <p>&nbsp;</p>}\n\t\t\t{!PSRouter.showingLeft() && <p>\n\t\t\t\t<a href={PSRouter.href(PSRouter.leftLoc)} class=\"button\"><i class=\"fa fa-caret-left\" aria-hidden></i> More replays</a>\n\t\t\t</p>}\n\t\t</div>;\n\t}\n\toverride render() {\n\t\tlet position: any = {};\n\t\tif (PSRouter.showingLeft()) {\n\t\t\tif (PSRouter.stickyRight) {\n\t\t\t\tposition = { position: 'sticky', top: '0' };\n\t\t\t} else {\n\t\t\t\tposition = { position: 'sticky', bottom: '0' };\n\t\t\t}\n\t\t}\n\n\t\tif (this.result === null) return this.renderError(position);\n\n\t\treturn <div class={PSRouter.showingLeft() ? 'mainbar has-sidebar' : 'mainbar'} style={position}>\n\t\t\t<div style={{ position: 'relative' }}>\n\t\t\t\t<BattleDiv />\n\t\t\t\t<BattleLogDiv />\n\t\t\t\t{this.renderControls()}\n\t\t\t\t<div id=\"LeaderboardBTF\"></div>\n\t\t\t</div>\n\t\t</div>;\n\t}\n}\n"],"mappings":"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","ignoreList":[]}